<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>js函数中的this指代问题.md</title>
      <link href="/2022/01/09/js%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E4%BB%A3%E9%97%AE%E9%A2%98-md/"/>
      <url>/2022/01/09/js%E5%87%BD%E6%95%B0%E4%B8%AD%E7%9A%84this%E6%8C%87%E4%BB%A3%E9%97%AE%E9%A2%98-md/</url>
      
        <content type="html"><![CDATA[<h2 id="问题描述"><a href="#问题描述" class="headerlink" title="问题描述"></a>问题描述</h2><p>在尝试写微信小程序时发现调用接口后的回调中访问不到全局的this，查了一下资料发现需要用箭头函数，因为普通的回调函数自己有局部的this，而ES6中新增加的箭头函数没有自己的this，所以会访问上一级的this。</p><pre class="language-JavaScript" data-language="JavaScript"><code class="language-JavaScript">&#x2F;&#x2F;普通函数success: function (res) &#123;        console.log(this);      &#125;&#x2F;&#x2F;箭头函数success: (res)&#x3D;&gt;&#123;    console.log(this);&#x2F;&#x2F;上一级的this&#125;</code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> js </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PAT甲级Maximum Subsequence Sum</title>
      <link href="/2022/01/09/PAT%E7%94%B2%E7%BA%A7Maximum%20Subsequence%20Sum/"/>
      <url>/2022/01/09/PAT%E7%94%B2%E7%BA%A7Maximum%20Subsequence%20Sum/</url>
      
        <content type="html"><![CDATA[<h2 id="题目"><a href="#题目" class="headerlink" title="题目"></a>题目</h2><h3 id="原题"><a href="#原题" class="headerlink" title="原题"></a>原题</h3><blockquote><p>Given a sequence of K integers  A continuous subsequence is defined to be where 1≤i≤j≤K. The Maximum Subsequence is the continuous subsequence which has the largest sum of its elements. For example, given sequence { -2, 11, -4, 13, -5, -2 }, its maximum subsequence is { 11, -4, 13 } with the largest sum being 20.Now you are supposed to find the largest sum, together with the first and the last numbers of the maximum subsequence.</p></blockquote><blockquote><p>理解：其实就是求累积和最大的子序列。</p></blockquote><h3 id="输入要求"><a href="#输入要求" class="headerlink" title="输入要求"></a>输入要求</h3><blockquote><p>Each input file contains one test case. Each case occupies two lines. The first line contains a positive integer K (≤10000). The second line contains K numbers, separated by a space.</p></blockquote><blockquote><p>翻译：每个输入文件包含一个测试点，每个测试点占两行，第一行包含一个小于等于10000的正整数K，第二行包含K个数字，用空格分隔</p></blockquote><h3 id="输出要求"><a href="#输出要求" class="headerlink" title="输出要求"></a>输出要求</h3><blockquote><p>For each test case, output in one line the largest sum, together with the first and the last numbers of the maximum subsequence. The numbers must be separated by one space, but there must be no extra space at the end of a line. In case that the maximum subsequence is not unique, output the one with the smallest indices i and j (as shown by the sample case). If all the K numbers are negative, then its maximum sum is defined to be 0, and you are supposed to output the first and the last numbers of the whole sequence.</p></blockquote><blockquote><p>翻译：对于每个测试点来说，在一行中输出最大和，以及最大子序列的头尾元素。数据必须用一个空格分隔，但行尾无多语空格。如果最大子序列不唯一，输出i和j小的（正如用例那辆），如果所有的数字都是负数，name最大的和应该是0，并且你应该输出整个数列的首位元素。</p></blockquote><h2 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h2><blockquote><p>DP问题，状态转移方程为DP[i]=max(DP[i-1],v[i]),从中找最大的DP元素即可，麻烦一些的是首位元素的确定：在找最大元素时顺便记录其对应的i（子串的尾部），然后向前探索，每进过一个元素将最大值减去该元素的值，知道为0代表找到了头部。</p></blockquote><h2 id="AC代码"><a href="#AC代码" class="headerlink" title="AC代码"></a>AC代码</h2><pre class="language-c++" data-language="c++"><code class="language-c++">#include &lt;bits&#x2F;stdc++.h&gt;using namespace std;int main()&#123;    int n;    int m &#x3D; -1;    int end;    cin &gt;&gt; n;    vector&lt;int&gt; v(n + 1);    vector&lt;int&gt; dp(n + 1, 0);    for (int i &#x3D; 1; i &lt;&#x3D; n; i++)    &#123;        cin &gt;&gt; v[i];        dp[i] &#x3D; max(dp[i - 1] + v[i], v[i]);        if (dp[i] &gt; m)        &#123;            m &#x3D; dp[i];            end &#x3D; i;        &#125;    &#125;    if (m &lt; 0)    &#123;        cout &lt;&lt; 0 &lt;&lt; &#39; &#39; &lt;&lt; v[1] &lt;&lt; &#39; &#39; &lt;&lt; v[n];        return 0;    &#125;    int begin &#x3D; end;    int temp &#x3D; m;    for (begin &#x3D; end; begin &gt; 0; begin--)    &#123;        temp -&#x3D; v[begin];        if (temp &#x3D;&#x3D; 0)        &#123;            break;        &#125;    &#125;    cout &lt;&lt; m &lt;&lt; &#39; &#39; &lt;&lt; v[begin] &lt;&lt; &#39; &#39; &lt;&lt; v[end];    return 0;&#125;</code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> PAT </tag>
            
            <tag> 动态规划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>最长回文子串问题解法</title>
      <link href="/2022/01/05/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2%E9%97%AE%E9%A2%98%E8%A7%A3%E6%B3%95/"/>
      <url>/2022/01/05/%E6%9C%80%E9%95%BF%E5%9B%9E%E6%96%87%E5%AD%90%E4%B8%B2%E9%97%AE%E9%A2%98%E8%A7%A3%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<h2 id="暴力求解"><a href="#暴力求解" class="headerlink" title="暴力求解"></a>暴力求解</h2><p>找出所有子串，依次判断是不是回文子串即可，时间复杂度n^3，大概率导致一些测试点超时。</p><h2 id="中心扩展法"><a href="#中心扩展法" class="headerlink" title="中心扩展法"></a>中心扩展法</h2><p>依次将每一个位置作为中心，向两侧扩展，直到不满足回文条件位置，找出最大的长度。</p><p>但是要注意每个位置要考虑两种情况：</p><ul><li>奇数长度如 aba</li><li>偶数长度如 abba</li></ul><p>所以每个位置需要按照两种方式分别进行扩展</p><p>时间复杂度n^2</p><h2 id="动态规划算法"><a href="#动态规划算法" class="headerlink" title="动态规划算法"></a>动态规划算法</h2><h3 id="状态转移方程"><a href="#状态转移方程" class="headerlink" title="状态转移方程"></a>状态转移方程</h3><p>dp[i,j]=</p><ul><li>dp[i+1,j-1],str[i]=str[j]</li><li>0,str[i]!=str[j]</li></ul><p>其中<code>dp[j][j]==1</code>含义为从i到j的子串为回文子串</p><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @brief 动态规划算法求解最长回文子串 * * @param s * @return int */</span><span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> n<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> longest <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                           <span class="token comment">//记录最长长度</span>    <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                             <span class="token comment">//开始</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// n*n向量</span>    <span class="token comment">// dp[i][j]=1代表从i到j是回文串</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//对角线为1及一个字符长度的回文子串</span>        <span class="token comment">// aa bb 这种两个的回文串</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                start <span class="token operator">=</span> i<span class="token punctuation">;</span>                longest <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//当前长度为2</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> l <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">//长度为l时的起始点</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> l <span class="token operator">+</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//长度为l时的终点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                start <span class="token operator">=</span> i<span class="token punctuation">;</span>                longest <span class="token operator">=</span> l<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> longest<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h3 id="马拉车算法"><a href="#马拉车算法" class="headerlink" title="马拉车算法"></a>马拉车算法</h3><ol><li>将字符串扩展为奇数位，每两个字符之间插入一个#，并在首位插入两个不一样的其他字符，来防止越界如<code>abc</code>可变为<code>$#a#b#c#^</code></li><li>进行马拉车算法，思路参考了<a href="https://www.zhihu.com/question/37289584/answer/**465656849**">知乎Manacher算法</a></li></ol><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token comment">/** * @brief 马拉车算法求解最长回文子串 * * @param s 字符串 * @return int 长度 */</span><span class="token keyword">int</span> <span class="token function">Manacher</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    s <span class="token operator">=</span> <span class="token function">preProcess</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p[i]用于存放以i为中心的回文子串长度</span>    <span class="token keyword">int</span> center <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//当前对称子串的中心及右边界</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i_mirror <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> center <span class="token operator">-</span> i<span class="token punctuation">;</span> <span class="token comment">// i的对称位置</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">></span> i<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>right <span class="token operator">-</span> i<span class="token punctuation">,</span> p<span class="token punctuation">[</span>i_mirror<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//防止超出右边界，超出后就不一定是p[i]=p[i_mirror]了</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//如果等于R</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//在上述基础上进行中心扩展</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//需要更新边界和中心基准</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> right<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            center <span class="token operator">=</span> i<span class="token punctuation">;</span>            right <span class="token operator">=</span> i <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意返回的是迭代器，所以需要用*取值</span><span class="token punctuation">&#125;</span></code></pre><h3 id="整体代码"><a href="#整体代码" class="headerlink" title="整体代码"></a>整体代码</h3><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token comment">/** * @brief 字符串预处理，插入间隔符号 * * @param s 待处理字符串 * @return string 处理完成的字符串 */</span>string <span class="token function">preProcess</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    string temp <span class="token operator">=</span> <span class="token string">"^"</span><span class="token punctuation">;</span> <span class="token comment">//以^开头</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        temp <span class="token operator">+=</span> <span class="token string">"$"</span><span class="token punctuation">;</span>        <span class="token keyword">return</span> temp<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        temp <span class="token operator">+=</span> <span class="token string">"#"</span><span class="token punctuation">;</span> <span class="token comment">//以#分割</span>        temp <span class="token operator">+=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    temp <span class="token operator">+=</span> <span class="token string">"#$"</span><span class="token punctuation">;</span> <span class="token comment">//以$结尾</span>    <span class="token keyword">return</span> temp<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @brief 马拉车算法求解最长回文子串 * * @param s 字符串 * @return int 长度 */</span><span class="token keyword">int</span> <span class="token function">Manacher</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    s <span class="token operator">=</span> <span class="token function">preProcess</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">p</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// p[i]用于存放以i为中心的回文子串长度</span>    <span class="token keyword">int</span> center <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> right <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//当前对称子串的中心及右边界</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> i_mirror <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> center <span class="token operator">-</span> i<span class="token punctuation">;</span> <span class="token comment">// i的对称位置</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>right <span class="token operator">></span> i<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span>right <span class="token operator">-</span> i<span class="token punctuation">,</span> p<span class="token punctuation">[</span>i_mirror<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//防止超出右边界，超出后就不一定是p[i]=p[i_mirror]了</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//如果等于R</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//在上述基础上进行中心扩展</span>        <span class="token keyword">while</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span> <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//需要更新边界和中心基准</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">></span> right<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            center <span class="token operator">=</span> i<span class="token punctuation">;</span>            right <span class="token operator">=</span> i <span class="token operator">+</span> p<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> <span class="token operator">*</span><span class="token function">max_element</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意返回的是迭代器，所以需要用*取值</span><span class="token punctuation">&#125;</span><span class="token comment">/** * @brief 动态规划算法求解最长回文子串 * * @param s * @return int */</span><span class="token keyword">int</span> <span class="token function">dp</span><span class="token punctuation">(</span>string s<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n <span class="token operator">=</span> s<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&lt;</span> <span class="token number">1</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> n<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> longest <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                           <span class="token comment">//记录最长长度</span>    <span class="token keyword">int</span> start <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>                             <span class="token comment">//开始</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">dp</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// n*n向量</span>    <span class="token comment">// dp[i][j]=1代表从i到j是回文串</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//对角线为1及一个字符长度的回文子串</span>        <span class="token comment">// aa bb 这种两个的回文串</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                start <span class="token operator">=</span> i<span class="token punctuation">;</span>                longest <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//当前长度为2</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> l <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span> l <span class="token operator">&lt;=</span> n<span class="token punctuation">;</span> l<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n <span class="token operator">-</span> l <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">//长度为l时的起始点</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">int</span> j <span class="token operator">=</span> l <span class="token operator">+</span> i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//长度为l时的终点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">==</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> dp<span class="token punctuation">[</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                dp<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>                start <span class="token operator">=</span> i<span class="token punctuation">;</span>                longest <span class="token operator">=</span> l<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">return</span> longest<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    string a<span class="token punctuation">;</span>    <span class="token function">getline</span><span class="token punctuation">(</span>cin<span class="token punctuation">,</span> a<span class="token punctuation">)</span><span class="token punctuation">;</span>    cout <span class="token operator">&lt;&lt;</span> <span class="token function">dp</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> 字符串 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>c++刷算法</title>
      <link href="/2021/12/28/c++%E5%88%B7%E7%AE%97%E6%B3%95/"/>
      <url>/2021/12/28/c++%E5%88%B7%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>c++刷算法时的一些技巧</p><span id="more"></span><h2 id="输入输出"><a href="#输入输出" class="headerlink" title="输入输出"></a>输入输出</h2><ol><li><code>getline(cin,str,&lt;separator&gt;);</code><ul><li>三个参数一次为输入流，存放位置，分割符，其中分隔符默认为\n，即默认读取一行</li></ul></li></ol><h2 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h2><ol><li>字符串转数字<ul><li>stoi(int)</li><li>stol(long)</li><li>stof(float)</li><li>stod(double)</li></ul></li><li>字符串可直接用+连接</li><li>大小写转换<ul><li>transform(s.begin(), s.end(), s.begin(), ::toupper); //小写转大写</li><li>transform(s.begin(), s.end(), s.begin(), ::tolower); //大写转小写</li></ul></li></ol><h2 id="vector-操作"><a href="#vector-操作" class="headerlink" title="vector 操作"></a>vector 操作</h2><ol><li>max_element(v.begin(),v.end()) 可以返回最大元素的迭代器，用*获得最大值 如 <code>*max_element(p.begin(), p.end())</code>,最小值即min_element();</li></ol>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> c++ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HBU易班图片设计规范</title>
      <link href="/2021/10/30/HBU%E6%98%93%E7%8F%AD%E5%9B%BE%E7%89%87%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/"/>
      <url>/2021/10/30/HBU%E6%98%93%E7%8F%AD%E5%9B%BE%E7%89%87%E8%AE%BE%E8%AE%A1%E8%A7%84%E8%8C%83/</url>
      
        <content type="html"><![CDATA[<h2 id="图片基本格式要求"><a href="#图片基本格式要求" class="headerlink" title="图片基本格式要求"></a>图片基本格式要求</h2><blockquote><p>为便于设计及使用图片格式统一使用<code>png</code>格式</p></blockquote><h2 id="易班大厅相关图片要求"><a href="#易班大厅相关图片要求" class="headerlink" title="易班大厅相关图片要求"></a>易班大厅相关图片要求</h2><ul><li>易办大厅首页图长宽比为2:1</li><li>易办大厅内部应用图标为正方形透明png,设计中可参考<a href="https://fontawesome.com/">fontawesome</a>,<a href="https://www.iconfont.cn/">阿里巴巴矢量图标库</a></li></ul><h2 id="易班APP首页图标"><a href="#易班APP首页图标" class="headerlink" title="易班APP首页图标"></a>易班APP首页图标</h2><ul><li>格式为png</li><li>一式两份<ul><li>64*64一份</li><li>108*108一份</li></ul></li><li>两套风格<ul><li>易班相关风格(易办大厅，易班教务)</li><li>学校相关风格(学生事物)</li></ul></li></ul><h2 id="易班APP首页轮播图"><a href="#易班APP首页轮播图" class="headerlink" title="易班APP首页轮播图"></a>易班APP首页轮播图</h2><ul><li>大小为710 * 284 或 1060 * 424，宽高比1:0.4，单张最大15M</li></ul>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>一卡通挂失设计</title>
      <link href="/2021/10/01/%E4%B8%80%E5%8D%A1%E9%80%9A%E6%8C%82%E5%A4%B1%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/"/>
      <url>/2021/10/01/%E4%B8%80%E5%8D%A1%E9%80%9A%E6%8C%82%E5%A4%B1%E8%AE%BE%E8%AE%A1%E6%96%87%E6%A1%A3/</url>
      
        <content type="html"><![CDATA[<h2 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h2><h3 id="功能需求"><a href="#功能需求" class="headerlink" title="功能需求"></a>功能需求</h3><ul><li>拾取者可在应用上发布遗失卡的学号，并提供自己的联系方式，方便取得联系。</li><li>遗失者可通过易班APP的消息或者应用界面查看到拾取者联系方式，私下取得联系。</li></ul><h3 id="安全需求"><a href="#安全需求" class="headerlink" title="安全需求"></a>安全需求</h3><ul><li>不暴露过多的个人信息</li></ul><h2 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h2><h2 id="使用技术方案"><a href="#使用技术方案" class="headerlink" title="使用技术方案"></a>使用技术方案</h2><ul><li>前端使用基于bootstrap的sb-admin框架</li><li>后端使用thinkphp5框架</li></ul><h4 id="理由"><a href="#理由" class="headerlink" title="理由"></a>理由</h4><blockquote><p> 界面简洁优美，开发迅速</p></blockquote><h3 id="程序流程"><a href="#程序流程" class="headerlink" title="程序流程"></a>程序流程</h3><ol><li>学生捡到遗失的一卡通</li><li>转到易班APP填写遗失的卡号及个人联系方式</li><li>调用校级授权接口数据库根据学号获得易班id</li><li>使用易班接口给遗失者的易班账号发消息</li></ol><h2 id="难点及解决方案"><a href="#难点及解决方案" class="headerlink" title="难点及解决方案"></a>难点及解决方案</h2><ol><li>由于易班官方接口只可以根据id获得学号，但无法反向完成。需要用户至少登录应用一次将用户id和学号对应关系存到我们自己的数据库</li><li>易班app通知无弹窗，需要主动的去查看，建议进阶为短信通知，但需要购买短信服务。</li><li>推广难点：如何让大家了解到有这样一个功能，并在捡到一卡通的时候使用。  目前只能想到加大宣传</li></ol><h2 id="进阶方向"><a href="#进阶方向" class="headerlink" title="进阶方向"></a>进阶方向</h2><h3 id="购买短信服务"><a href="#购买短信服务" class="headerlink" title="购买短信服务"></a>购买短信服务</h3><blockquote><p>给遗失者的手机发送短信提醒，需要资金支持，价格参考 [阿里云短信服务] (<a href="https://common-buy.aliyun.com/?spm=5176.8195934.J_5834642020.2.65044378QROj06&amp;&amp;commodityCode=newdysmsbag#/buy">https://common-buy.aliyun.com/?spm=5176.8195934.J_5834642020.2.65044378QROj06&amp;&amp;commodityCode=newdysmsbag#/buy</a> )</p></blockquote><h3 id="使用读卡器（此条只是设想）"><a href="#使用读卡器（此条只是设想）" class="headerlink" title="使用读卡器（此条只是设想）"></a>使用读卡器（此条只是设想）</h3><blockquote><p>与一卡通部门联系，申请读卡器，在学校的固定地点设置丢失领取处，拾取者刷卡，读卡器读出信息后自动给遗失者发送短信，通知其到领取处领取。</p></blockquote><h3 id="预期开发时间"><a href="#预期开发时间" class="headerlink" title="预期开发时间"></a>预期开发时间</h3><p><code>一周</code></p>]]></content>
      
      
      <categories>
          
          <category> 设计文档 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 设计文档 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计组实验：乘法器</title>
      <link href="/2021/09/26/%E8%AE%A1%E7%BB%84%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%B9%98%E6%B3%95%E5%99%A8/"/>
      <url>/2021/09/26/%E8%AE%A1%E7%BB%84%E5%AE%9E%E9%AA%8C%EF%BC%9A%E4%B9%98%E6%B3%95%E5%99%A8/</url>
      
        <content type="html"><![CDATA[<p>计组第二次实验 乘法器</p><span id="more"></span><h2 id="乘法器模块设计"><a href="#乘法器模块设计" class="headerlink" title="乘法器模块设计"></a>乘法器模块设计</h2><h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">input</span>         clk<span class="token punctuation">,</span>        <span class="token comment">// 时钟</span><span class="token keyword">input</span>         mult_begin<span class="token punctuation">,</span> <span class="token comment">// 乘法开始信号</span><span class="token keyword">input</span>  <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mult_op1<span class="token punctuation">,</span>   <span class="token comment">// 乘法源操作数1</span><span class="token keyword">input</span>  <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> mult_op2<span class="token punctuation">,</span>   <span class="token comment">// 乘法源操作数2</span></code></pre><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> product<span class="token punctuation">,</span>    <span class="token comment">// 乘积</span><span class="token keyword">output</span>        mult_end   <span class="token comment">// 乘法结束信号</span></code></pre><h3 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h3><blockquote><p>输入两个32位数mult_op1作为被乘数，mult_op2作为乘数<br>两个数都认为是有符号数所以需要取出符号进行处理<br>mult_begin作为开始信号，还需设置一个乘法进行中的标志信号，开始信号刚变成1时，对初始数据进行处理将进行信号设为1<br>当进行信号为1时每次上升沿到来就进行一次相加，结束后被乘数左移，乘数右移</p></blockquote><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token comment">//乘法正在运算信号和结束信号</span>    <span class="token keyword">reg</span> mult_valid<span class="token punctuation">;</span>    <span class="token keyword">assign</span> mult_end <span class="token operator">=</span> <span class="token operator">~</span><span class="token punctuation">(</span><span class="token operator">|</span>multiplier<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//乘法结束信号：乘数全0</span>    <span class="token important">always @</span><span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>   <span class="token comment">//①</span>    <span class="token keyword">begin</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>mult_begin<span class="token punctuation">)</span>    <span class="token comment">//如果没有开始或者已经结束了</span>        <span class="token keyword">begin</span>            mult_valid <span class="token operator">&lt;=</span> <span class="token number">1'b0</span><span class="token punctuation">;</span>     <span class="token comment">//mult_valid 赋值成0，说明现在没有进行有效的乘法运算</span>        <span class="token keyword">end</span>        <span class="token keyword">else</span>        <span class="token keyword">begin</span>            mult_valid <span class="token operator">&lt;=</span> <span class="token number">1'b1</span><span class="token punctuation">;</span>        <span class="token keyword">end</span>    <span class="token keyword">end</span>    <span class="token comment">//两个源操作取绝对值，正数的绝对值为其本身，负数的绝对值为取反加1</span>    <span class="token keyword">wire</span>        op1_sign<span class="token punctuation">;</span>      <span class="token comment">//操作数1的符号位</span>    <span class="token keyword">wire</span>        op2_sign<span class="token punctuation">;</span>      <span class="token comment">//操作数2的符号位</span>    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> op1_absolute<span class="token punctuation">;</span>  <span class="token comment">//操作数1的绝对值</span>    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> op2_absolute<span class="token punctuation">;</span>  <span class="token comment">//操作数2的绝对值</span>    <span class="token keyword">assign</span> op1_sign <span class="token operator">=</span> mult_op1<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">assign</span> op2_sign <span class="token operator">=</span> mult_op2<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">assign</span> op1_absolute <span class="token operator">=</span> op1_sign <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">~</span>mult_op1<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> mult_op1<span class="token punctuation">;</span>    <span class="token keyword">assign</span> op2_absolute <span class="token operator">=</span> op2_sign <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">~</span>mult_op2<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> mult_op2<span class="token punctuation">;</span>    <span class="token comment">//加载被乘数，运算时每次左移一位</span>    <span class="token keyword">reg</span>  <span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> multiplicand<span class="token punctuation">;</span>    <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>  <span class="token comment">//②</span>    <span class="token keyword">begin</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mult_valid<span class="token punctuation">)</span>        <span class="token keyword">begin</span>    <span class="token comment">// 如果正在进行乘法，则被乘数每时钟左移一位</span>            multiplicand <span class="token operator">&lt;=</span> <span class="token operator">&#123;</span>multiplicand<span class="token punctuation">[</span><span class="token number">62</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token number">1'b0</span><span class="token operator">&#125;</span><span class="token punctuation">;</span>  <span class="token comment">//被乘数x每次左移一位。</span>        <span class="token keyword">end</span>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mult_begin<span class="token punctuation">)</span>         <span class="token keyword">begin</span>   <span class="token comment">// 乘法开始，加载被乘数，为乘数1的绝对值</span>            multiplicand <span class="token operator">&lt;=</span> <span class="token operator">&#123;</span><span class="token number">32'd0</span><span class="token punctuation">,</span>op1_absolute<span class="token operator">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">end</span>    <span class="token keyword">end</span>    <span class="token comment">//加载乘数，运算时每次右移一位，相当于y</span>    <span class="token keyword">reg</span>  <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> multiplier<span class="token punctuation">;</span>        <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>  <span class="token comment">//③</span>    <span class="token keyword">begin</span>    <span class="token function">if</span><span class="token punctuation">(</span>mult_valid<span class="token punctuation">)</span>    <span class="token keyword">begin</span>       <span class="token comment">//如果正在进行乘法，则乘数每时钟右移一位</span>         multiplier <span class="token operator">&lt;=</span> <span class="token operator">&#123;</span><span class="token number">1'b0</span><span class="token punctuation">,</span>multiplier<span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">&#125;</span><span class="token punctuation">;</span> <span class="token comment">//相当于乘数y右移一位</span>    <span class="token keyword">end</span>    <span class="token keyword">else</span> <span class="token function">if</span><span class="token punctuation">(</span>mult_begin<span class="token punctuation">)</span>    <span class="token keyword">begin</span>   <span class="token comment">//乘法开始，加载乘数，为乘数2的绝对值</span>        multiplier <span class="token operator">&lt;=</span> op2_absolute<span class="token punctuation">;</span>        <span class="token keyword">end</span>    <span class="token keyword">end</span>    <span class="token comment">// 部分积：乘数末位为1，由被乘数左移得到；乘数末位为0，部分积为0</span>    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> partial_product<span class="token punctuation">;</span>    <span class="token keyword">assign</span> partial_product <span class="token operator">=</span> multiplier<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">?</span> multiplicand<span class="token punctuation">:</span><span class="token number">64'd0</span><span class="token punctuation">;</span>        <span class="token comment">//若此时y的最低位为1，则把x赋值给部分积partial_product，否则把0赋值给partial_product</span>        <span class="token comment">//累加器</span>    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">63</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> product_temp<span class="token punctuation">;</span><span class="token comment">//临时结果</span>    <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>  <span class="token comment">//④//clk信号从0变为1时，激发此段语句的执行，但语句的执行需要时间</span>    <span class="token keyword">begin</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mult_valid<span class="token punctuation">)</span>        <span class="token keyword">begin</span>            product_temp <span class="token operator">&lt;=</span> product_temp <span class="token operator">+</span> partial_product<span class="token punctuation">;</span>        <span class="token keyword">end</span>              <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>mult_begin<span class="token punctuation">)</span>        <span class="token keyword">begin</span>        product_temp <span class="token operator">&lt;=</span> <span class="token number">64'd0</span><span class="token punctuation">;</span>        <span class="token keyword">end</span>     <span class="token keyword">end</span>    <span class="token comment">//乘法结果的符号位和乘法结果</span>    <span class="token keyword">reg</span> product_sign<span class="token punctuation">;</span><span class="token comment">//乘积结果的符号</span>    <span class="token important">always @</span> <span class="token punctuation">(</span><span class="token keyword">posedge</span> clk<span class="token punctuation">)</span>  <span class="token comment">// 乘积⑤</span>    <span class="token keyword">begin</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>mult_valid<span class="token punctuation">)</span>        <span class="token keyword">begin</span>              product_sign <span class="token operator">&lt;=</span> op1_sign <span class="token operator">^</span> op2_sign<span class="token punctuation">;</span>        <span class="token keyword">end</span>    <span class="token keyword">end</span>    <span class="token comment">//若乘法结果为负数，则需要对结果取反+1</span>    <span class="token keyword">assign</span> product <span class="token operator">=</span> product_sign <span class="token operator">?</span> <span class="token punctuation">(</span><span class="token operator">~</span>product_temp<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> product_temp<span class="token punctuation">;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 计算机组成原理与体系结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机组成原理与体系结构 </tag>
            
            <tag> 龙芯实验平台 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>优秀组织产品</title>
      <link href="/2021/09/23/%E4%BC%98%E7%A7%80%E7%BB%84%E7%BB%87%E4%BA%A7%E5%93%81/"/>
      <url>/2021/09/23/%E4%BC%98%E7%A7%80%E7%BB%84%E7%BB%87%E4%BA%A7%E5%93%81/</url>
      
        <content type="html"><![CDATA[<p>主要学习其他高校优秀互联网组织的产品</p><span id="more"></span><h2 id="华科"><a href="#华科" class="headerlink" title="华科"></a>华科</h2><h3 id="联创团队"><a href="#联创团队" class="headerlink" title="联创团队"></a>联创团队</h3><blockquote><p>联创团队（Unique-Studio）创建于2000年6月。团队秉承不断创新的核心精神，怀揣对技术的无限热忱，努力打造一个以技术为驱动，多元发展的精英学生组织。团队立足信息技术，通过承担科研项目，参加科技大赛，孕育创新产品等形式激发队员的无限激情和潜能，并积极整合历届队员的优势和资源，共同创造团队和个人的未来。unique22作为一个以兴趣为主导、强调主动实践和自主创新，由学生自发组织、自我管理的学生团队，团队致力于为有潜力、肯努力、富有激情的学生构建一流的学习环境，引导他们快速成长。目前团队已经取得了优异的成绩成为华中科技大学大学生主动实践获得成功的典范之一。团队积极参加国际高水平的科技创新大赛，尤其是在微软创新杯(Imagine-Cup)全球学生大赛中，连续5年闯进总决赛并代表中国大学生在世界大学生科技竞赛的舞台上崭露头角。unique33近年来，团队大力推广校园极客文化，努力把创新活动与IT产业相结合。团队连续三年举办了Unique-Hack-Day校园黑客马拉松大赛，通过Unique-Hack-Day，连接起了当今最有想法的年轻人，努力让极客文化传播得更广。与此同时，团队成员在校期间努力创新，推出了众多产品。离校后，团队成员积极投身创业浪潮，成功孵化出了百纳信息技术有限公司等企业。联创团队着力打造新的联创平台，为把更多更好的学生带向自主创新之路而不懈努力。<br><a href="https://hustunique.com/#groups_page">https://hustunique.com/#groups_page</a></p></blockquote><ul><li>校园匿名社区</li><li>以书会友阅读交流平台</li></ul><h3 id="冰岩团队"><a href="#冰岩团队" class="headerlink" title="冰岩团队"></a>冰岩团队</h3><p><a href="https://www.bingyan.net/#/product">https://www.bingyan.net/#/product</a></p><ul><li>公共选修课评价系统</li><li>周边商铺评价系统</li><li>校园通</li><li>二手市场</li><li>软件分享平台</li></ul><h3 id="Dian团队"><a href="#Dian团队" class="headerlink" title="Dian团队"></a>Dian团队</h3><blockquote><p> Dian团队全称是“基于导师制的人才孵化站”，由刘玉教授于2002年3月创建，植根于华中科技大学电信学院，隶属于华中科技大学启明学院，旨在通过真实项目实践培养学生的创新能力、实践精神和综合素质。目前培养的正式队员共677名，已出站637名，并常年保持100名在校队员的规模，队员主要来自华中科技大学各院系。</p></blockquote><p><a href="https://www.dian.org.cn/cn/projects/">https://www.dian.org.cn/cn/projects/</a></p><p>主要是一个互联网科研平台</p><h2 id="南昌大学"><a href="#南昌大学" class="headerlink" title="南昌大学"></a>南昌大学</h2><h3 id="云家园"><a href="#云家园" class="headerlink" title="云家园"></a>云家园</h3><p><a href="http://team.ncuos.com/product">http://team.ncuos.com/product</a></p><p>学生事务: 离/返校登记、 学生证补(换)、 安全教育、 学长小教员（星火使者）、 自助报到、 认定申请、 最美大学生投票、 新生入学教育、 错峰返校登记、 信贷志愿者报名、 在读证明打印、 毕业生离校、 学生活动、 班导评价、 辅导员评价、 …</p><p>信息查询: 成绩查询、 班级通讯录、 违纪处分、 微信平台、 综合素质、 晚查房记录、 寝室用电查询</p><h2 id="重庆邮电大学"><a href="#重庆邮电大学" class="headerlink" title="重庆邮电大学"></a>重庆邮电大学</h2><h3 id="红岩网校"><a href="#红岩网校" class="headerlink" title="红岩网校"></a>红岩网校</h3><blockquote><p>红岩网校工作站是学校唯一一个从事互联网产品开发运营的校级学生组织，在校团委的指导下，由学生自我管理，多年来走出了一大批优秀的IT互联网人才，深受腾讯、阿里巴巴、字节跳动、华为等知名互联网企业的青睐。 团队先后获评“全国五四红旗团支部”、“团中央新媒体专业工作室”、“重庆市IT杰出青年群体”等系列荣誉。开发上线了“重邮小帮手”微信公众号，“重邮帮”微信小程序、“掌上重邮”APP等一系列优秀的校园网络产品，深受广大师生好评。<br><a href="https://redrock.team/#/">https://redrock.team/#/</a></p></blockquote><ul><li>校园网址导航</li><li>弹幕系统</li></ul><h2 id="浙江大学"><a href="#浙江大学" class="headerlink" title="浙江大学"></a>浙江大学</h2><h3 id="求是网"><a href="#求是网" class="headerlink" title="求是网"></a>求是网</h3><p><a href="http://www.qsc.zju.edu.cn/#Content0_0">http://www.qsc.zju.edu.cn/#Content0_0</a></p><ul><li>云盘(小文件速传)<a href="https://www.qsc.zju.edu.cn/box/">https://www.qsc.zju.edu.cn/box/</a></li><li>招新系统(面向全校各组织社团)<a href="https://rop.zjuqsc.com/">https://rop.zjuqsc.com/</a></li><li>选课助手 教师评价</li></ul><h2 id="武汉大学"><a href="#武汉大学" class="headerlink" title="武汉大学"></a>武汉大学</h2><h3 id="自强Studio"><a href="#自强Studio" class="headerlink" title="自强Studio"></a>自强Studio</h3><blockquote><p>武汉大学自强Studio，是武汉大学乃至华中地区最大的学生互联网团队之一。主要运营的线上产品包括，掌上武大微信公众号，自强网，自强学堂官方QQ、微博，自强Report、淘课啦网站、吃乎等；举办的品牌活动包括:十大珞珈风云学子评选活动、奔跑吧珞珈、毕业集市、脱机自习等。我们的愿景是成为全国最专业最有趣的高校互联网团队之一，引领武大精神。<br><a href="https://www.ziqiang.net.cn/#index">https://www.ziqiang.net.cn/#index</a></p></blockquote><ul><li>吃乎 美食分享评测</li><li>摄影交流</li><li>掌上武大(线下事务线上办理)</li><li>淘课啦<ul><li>武大公选课大众点评精心收集公共资源淘课啦，武大最强学习平台</li></ul></li><li>脱机自习</li><li>毕业集市(二手交易)</li><li>十大珞珈风云学子评选</li><li>奔跑吧珞珈(running 河大？)</li></ul>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>汇编语言寄存器总结</title>
      <link href="/2021/09/22/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%AF%84%E5%AD%98%E5%99%A8%E6%80%BB%E7%BB%93/"/>
      <url>/2021/09/22/%E6%B1%87%E7%BC%96%E8%AF%AD%E8%A8%80%E5%AF%84%E5%AD%98%E5%99%A8%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<p>汇编语言常用寄存器功能总结(持续更新中)</p><span id="more"></span><h2 id="数据寄存器"><a href="#数据寄存器" class="headerlink" title="数据寄存器"></a>数据寄存器</h2><blockquote><p>主要有AX BX CX DX 四大寄存器<br>每一个又分为高（H）和 低 （L）各16位 两部分</p></blockquote><h3 id="AX"><a href="#AX" class="headerlink" title="AX"></a>AX</h3><ul><li>al用于存储输入的字符</li><li>ah用于输入输出标志 ah=1时为输入 ah=2时为输出  ah=0AH 时为输入字符串  ah=9为输出字符串</li><li>除法时用AX放被除数，除完后ah存放余数，al存放商</li><li>乘法时al存放乘数，结果存放到ax中</li></ul><h3 id="BX"><a href="#BX" class="headerlink" title="BX"></a>BX</h3><h3 id="CX"><a href="#CX" class="headerlink" title="CX"></a>CX</h3><h3 id="DX"><a href="#DX" class="headerlink" title="DX"></a>DX</h3><ul><li>输出字符时将字符放到dl中去</li><li>输入字符串时需要将存储地址放到DX中去</li><li>输出字符串时应将字符串第一个字符的地址放到DX中</li></ul>]]></content>
      
      
      <categories>
          
          <category> 汇编语言 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 汇编语言 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图像的数字化处理</title>
      <link href="/2021/09/07/%E5%9B%BE%E5%83%8F%E7%9A%84%E6%95%B0%E5%AD%97%E5%8C%96%E5%A4%84%E7%90%86/"/>
      <url>/2021/09/07/%E5%9B%BE%E5%83%8F%E7%9A%84%E6%95%B0%E5%AD%97%E5%8C%96%E5%A4%84%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="采样"><a href="#采样" class="headerlink" title="采样"></a>采样</h2><blockquote><p>方法很简单就是对图像（数组）进行间隔取样，随着取样间隔的增大，图像越来越模糊</p></blockquote><pre class="language-matlab" data-language="matlab"><code class="language-matlab"><span class="token keyword">function</span>  <span class="token function">fun</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>    <span class="token comment">%获得图片大小</span>    <span class="token punctuation">[</span>w<span class="token punctuation">,</span>h<span class="token punctuation">]</span><span class="token operator">=</span><span class="token function">size</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">%画出原图像</span>    <span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">imshow</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">%命名</span>    <span class="token function">title</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>"<span class="token comment">%d*%d",w,h));</span>    <span class="token comment">%每次图片取样间隔为2，逐渐缩小图像</span>    <span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">5</span>        p2<span class="token operator">=</span><span class="token function">p1</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">2</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">imshow</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">title</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>"<span class="token comment">%d*%d",w/power(2,i),h/power(2,i)));</span>        p1<span class="token operator">=</span>p2<span class="token punctuation">;</span>    <span class="token keyword">end</span><span class="token keyword">end</span></code></pre><p>效果<br><img src="/images/dp1.png" loading="lazy"></p><h2 id="量化"><a href="#量化" class="headerlink" title="量化"></a>量化</h2><blockquote><p>灰度图像灰度值一般为0-255，可以缩减范围来压缩图片<br>matlab函数为<code>histeq(图片,量化等级)</code></p></blockquote><pre class="language-matlab" data-language="matlab"><code class="language-matlab">    <span class="token keyword">function</span> <span class="token function">fun2</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>    <span class="token comment">%画出原图像</span>    <span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token function">imshow</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">%命名</span>    <span class="token function">title</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>"灰度级<span class="token comment">%d",256));</span>    <span class="token comment">%每次图片灰度值范围缩减一半</span>    <span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span><span class="token number">7</span>        p2<span class="token operator">=</span><span class="token function">histeq</span><span class="token punctuation">(</span>p1<span class="token punctuation">,</span><span class="token number">256</span><span class="token operator">/</span><span class="token function">power</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">i</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">imshow</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">title</span><span class="token punctuation">(</span><span class="token function">compose</span><span class="token punctuation">(</span>"灰度级<span class="token comment">%d",256/power(2,i)));</span>    <span class="token keyword">end</span><span class="token keyword">end</span></code></pre><p>效果<br><img src="/images/dp2.png" loading="lazy"></p>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计组实验：定点加法</title>
      <link href="/2021/09/07/%E8%AE%A1%E7%BB%84%E5%AE%9E%E9%AA%8C%EF%BC%9A%E5%AE%9A%E7%82%B9%E5%8A%A0%E6%B3%95/"/>
      <url>/2021/09/07/%E8%AE%A1%E7%BB%84%E5%AE%9E%E9%AA%8C%EF%BC%9A%E5%AE%9A%E7%82%B9%E5%8A%A0%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>计组第一次实验 定点加法</p><span id="more"></span><h2 id="新建工程"><a href="#新建工程" class="headerlink" title="新建工程"></a>新建工程</h2><blockquote><p>设备选择中 family选择Artix 7  package选择fbg676 型号为：xc7a200tfbg676-2</p></blockquote><h2 id="添加加法器程序"><a href="#添加加法器程序" class="headerlink" title="添加加法器程序"></a>添加加法器程序</h2><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps<span class="token keyword">module</span> <span class="token function">adder</span><span class="token punctuation">(</span>        <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> operand1<span class="token punctuation">,</span>        <span class="token keyword">input</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> operand2<span class="token punctuation">,</span>        <span class="token keyword">input</span>        cin<span class="token punctuation">,</span>        <span class="token keyword">output</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> result<span class="token punctuation">,</span>        <span class="token keyword">output</span> cout    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">assign</span> <span class="token operator">&#123;</span>cout<span class="token punctuation">,</span>result<span class="token operator">&#125;</span> <span class="token operator">=</span> operand1<span class="token operator">+</span>operand2<span class="token operator">+</span>cin<span class="token punctuation">;</span><span class="token keyword">endmodule</span></code></pre><ul><li>两个32位操作数输入和一个进位信号输入</li><li>一个32位结果输入和一位进位信号输出</li></ul><h2 id="进行仿真"><a href="#进行仿真" class="headerlink" title="进行仿真"></a>进行仿真</h2><h3 id="添加仿真文件"><a href="#添加仿真文件" class="headerlink" title="添加仿真文件"></a>添加仿真文件</h3><pre class="language-verilog" data-language="verilog"><code class="language-verilog"><span class="token constant">`timescale</span> <span class="token number">1</span>ns <span class="token operator">/</span> <span class="token number">1</span>ps   <span class="token comment">//仿真单位时间为1ns，精度为1ps</span><span class="token keyword">module</span> testbench<span class="token punctuation">;</span>    <span class="token comment">// Inputs</span>    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> operand1<span class="token punctuation">;</span>    <span class="token keyword">reg</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> operand2<span class="token punctuation">;</span>    <span class="token keyword">reg</span> cin<span class="token punctuation">;</span>    <span class="token comment">// Outputs</span>    <span class="token keyword">wire</span> <span class="token punctuation">[</span><span class="token number">31</span><span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">]</span> result<span class="token punctuation">;</span>    <span class="token keyword">wire</span> cout<span class="token punctuation">;</span>    <span class="token comment">// Instantiate the Unit Under Test (UUT)</span>    adder uut <span class="token punctuation">(</span>        <span class="token punctuation">.</span><span class="token function">operand1</span><span class="token punctuation">(</span>operand1<span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token punctuation">.</span><span class="token function">operand2</span><span class="token punctuation">(</span>operand2<span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token punctuation">.</span><span class="token function">cin</span><span class="token punctuation">(</span>cin<span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token punctuation">.</span><span class="token function">result</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token punctuation">.</span><span class="token function">cout</span><span class="token punctuation">(</span>cout<span class="token punctuation">)</span>    <span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">initial</span> <span class="token keyword">begin</span>        <span class="token comment">// Initialize Inputs</span>        operand1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        operand2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        cin <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">// Wait 100 ns for global reset to finish</span>        <span class="token number">#100</span><span class="token punctuation">;</span>        <span class="token comment">// Add stimulus here</span>    <span class="token keyword">end</span>    <span class="token important">always </span><span class="token number">#10</span> operand1 <span class="token operator">=</span> <span class="token property">$random</span><span class="token punctuation">;</span>  <span class="token comment">//$random为系统任务，产生一个随机的32位数</span>    <span class="token important">always </span><span class="token number">#10</span> operand2 <span class="token operator">=</span> <span class="token property">$random</span><span class="token punctuation">;</span>  <span class="token comment">//#10 表示等待10个单位时间(10ns)，即每过10ns，赋值一个随机的32位数</span>    <span class="token important">always </span><span class="token number">#10</span> cin <span class="token operator">=</span> <span class="token operator">&#123;</span><span class="token property">$random</span><span class="token operator">&#125;</span> <span class="token operator">%</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">//加了拼接符，&#123;$random&#125;产生一个非负数，除2取余得到0或1</span><span class="token keyword">endmodule</span></code></pre><p>目的是进行一个随机模拟输入信号，以验证程序正确</p><h3 id="进行仿真-1"><a href="#进行仿真-1" class="headerlink" title="进行仿真"></a>进行仿真</h3><p>点击 Run simulation 可以看到波形图，右键信号源可更改颜色和数制等</p><h2 id="添加外围模块"><a href="#添加外围模块" class="headerlink" title="添加外围模块"></a>添加外围模块</h2><blockquote><p>到板子上需要用触摸屏显示，所以需要加一个触摸屏模块，并将输入输出信号与之联系起来</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机组成原理与体系结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机组成原理与体系结构 </tag>
            
            <tag> 龙芯实验平台 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>(⊙︿⊙)惨痛的教训</title>
      <link href="/2021/09/06/%E4%B8%80%E6%AC%A1%E6%83%A8%E7%97%9B%E7%9A%84%E6%95%99%E8%AE%AD/"/>
      <url>/2021/09/06/%E4%B8%80%E6%AC%A1%E6%83%A8%E7%97%9B%E7%9A%84%E6%95%99%E8%AE%AD/</url>
      
        <content type="html"><![CDATA[<h2 id="2021年9月6日"><a href="#2021年9月6日" class="headerlink" title="2021年9月6日"></a>2021年9月6日</h2><p>上午给已上线的抽奖活动加后台管理功能，赶在上课前完成了，浑浑噩噩上了一天课，晚上手机没电了，充上电发现一等奖发多了！！！<br>还好及时止损，要不然损失重大了。。。罪过罪过</p><p>悲惨的一天</p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>计组总线</title>
      <link href="/2021/09/02/%E8%AE%A1%E7%BB%84%E6%80%BB%E7%BA%BF/"/>
      <url>/2021/09/02/%E8%AE%A1%E7%BB%84%E6%80%BB%E7%BA%BF/</url>
      
        <content type="html"><![CDATA[<p>计组总线部分知识点</p><span id="more"></span><h2 id="什么是总线"><a href="#什么是总线" class="headerlink" title="什么是总线"></a>什么是总线</h2><blockquote><p>用来将计算机系统中各个功能部件连接起来，构成一个完整的系统的计算机重要组成部分<br>是一种能由多个部件分时共享的公共信息传送线路。</p></blockquote><h2 id="总线的作用"><a href="#总线的作用" class="headerlink" title="总线的作用"></a>总线的作用</h2><blockquote><ol><li>是各功能部件间传递各类信息的通道；</li><li>是系统中各部件间的物理接口，能够减少各部件通信的复杂程度；</li><li>提供信息交换时所需的数据、地址、时序和控制信息；</li><li>提供一个共同遵循的协议或标准；</li><li>不应成为整个计算机性能的瓶颈；</li><li>方便计算机系统的集成、扩展和进化。</li></ol></blockquote><h2 id="总线传输的特点"><a href="#总线传输的特点" class="headerlink" title="总线传输的特点"></a>总线传输的特点</h2><blockquote><p>某一时刻只允许有一个部件向总线发送信息，但多个部件可以同时从总线上接收相同的信息。</p></blockquote><h2 id="如何减轻总线负载"><a href="#如何减轻总线负载" class="headerlink" title="如何减轻总线负载"></a>如何减轻总线负载</h2><blockquote><p>总线上的部件应通过三态驱动缓冲电路与总线连通。</p></blockquote><h2 id="总线仲裁的目的"><a href="#总线仲裁的目的" class="headerlink" title="总线仲裁的目的"></a>总线仲裁的目的</h2><blockquote><p>可以解决多个部件同时申请总线时的使用权分配问题。</p></blockquote><h2 id="集中式总线控制方式"><a href="#集中式总线控制方式" class="headerlink" title="集中式总线控制方式"></a>集中式总线控制方式</h2><h3 id="菊花链式总线仲裁"><a href="#菊花链式总线仲裁" class="headerlink" title="菊花链式总线仲裁"></a>菊花链式总线仲裁</h3><blockquote><p>连线简单，易于扩充，<code>对电路故障最敏感</code></p></blockquote><h3 id="计数器查询"><a href="#计数器查询" class="headerlink" title="计数器查询"></a>计数器查询</h3><blockquote><p>优先级设置较灵活，对故障不敏感，连线及控制过程较复杂</p></blockquote><h3 id="独立请求"><a href="#独立请求" class="headerlink" title="独立请求"></a>独立请求</h3><blockquote><p><code>判优速度最快</code>，但硬件器件用量大，连线多，成本较高。</p></blockquote><h2 id="总线宽度"><a href="#总线宽度" class="headerlink" title="总线宽度"></a>总线宽度</h2><blockquote><p>总线宽度一般指CPU中运算器与存储器之间进行互连的内部总线二进制位数，影响吞吐量。数据总线的位数（w），单位是b（位）是微型计算机的一个重要指标，通常与处理器的字长相一致；</p></blockquote><h2 id="总线带宽"><a href="#总线带宽" class="headerlink" title="总线带宽"></a>总线带宽</h2><blockquote><p>总线的带宽指的是这条总线在单位时间内可以传输的数据总量，它等于总线位宽与工作频率的乘积，总线带宽指的就是它的数据传输率。</p></blockquote><h2 id="总线复用"><a href="#总线复用" class="headerlink" title="总线复用"></a>总线复用</h2><blockquote><p>总线复用指的是数据和地址在同一个总线上传输的方式。</p></blockquote><h2 id="总线的主从设备"><a href="#总线的主从设备" class="headerlink" title="总线的主从设备"></a>总线的主从设备</h2><h3 id="主设备"><a href="#主设备" class="headerlink" title="主设备"></a>主设备</h3><blockquote><p>能够提出申请并获得总线控制权的设备</p></blockquote><h3 id="从设备"><a href="#从设备" class="headerlink" title="从设备"></a>从设备</h3><blockquote><p>只能被动接受总线控制传送数据的设备。</p></blockquote><h2 id="总线周期"><a href="#总线周期" class="headerlink" title="总线周期"></a>总线周期</h2><blockquote><p>是指通过总线完成一次内存读写或完成一次输入输出设备读写所需要的的必须时间</p></blockquote><h2 id="总线传输周期"><a href="#总线传输周期" class="headerlink" title="总线传输周期"></a>总线传输周期</h2><blockquote><p>指主设备和从设备之间完成完整地可靠的通信所需要的时间包括四个步骤</p></blockquote><ul><li>申请分配阶段：主模块申请占用总线的请求，总线运用判优控制仲裁决定</li><li>寻址阶段：主模块向从模块给出地址和命令</li><li>传数阶段：主模块和从模块交换数据</li><li>结束阶段：主模块撤销有关消息</li></ul><h2 id="总线的通信控制"><a href="#总线的通信控制" class="headerlink" title="总线的通信控制"></a>总线的通信控制</h2><blockquote><p>解决主、从设备如何获知传输开始和传输结束，以及通信双方如何协调进行数据通信。</p></blockquote><h2 id="同步通信和异步通信（总线）"><a href="#同步通信和异步通信（总线）" class="headerlink" title="同步通信和异步通信（总线）"></a>同步通信和异步通信（总线）</h2><h3 id="同步通信"><a href="#同步通信" class="headerlink" title="同步通信"></a>同步通信</h3><blockquote><p>信息传送由公共时钟控制，总线中包含时钟线</p></blockquote><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>时序关系简单，实现简单。</p><h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><ul><li>在设备速度不一致时按最坏情况确定，</li><li>传输线不能太长（时钟相移）</li></ul><h3 id="异步通信"><a href="#异步通信" class="headerlink" title="异步通信"></a>异步通信</h3><blockquote><p>信息传送的每一个操作都是由主设备或从设备特定信号的跳变所确定，总线上每一个事件的发生取决于前一个事件的发生</p></blockquote><h4 id="优点-1"><a href="#优点-1" class="headerlink" title="优点"></a>优点</h4><ul><li>数据传输可靠，适用于传输周期不同的设备，</li><li>对通讯线的长度没有严格的要求。</li></ul><h4 id="缺点-1"><a href="#缺点-1" class="headerlink" title="缺点"></a>缺点</h4><p>速度较慢</p><h3 id="半同步"><a href="#半同步" class="headerlink" title="半同步"></a>半同步</h3><blockquote><p>总线上各操作之间的时间间隔可以变化，但仅允许为公共时钟周期的整数倍。信号的出现、采样和结束仍以公共时钟为基准。</p></blockquote><h2 id="为什么说半同步通信保留了同步和异步两者的特点"><a href="#为什么说半同步通信保留了同步和异步两者的特点" class="headerlink" title="为什么说半同步通信保留了同步和异步两者的特点"></a>为什么说半同步通信保留了同步和异步两者的特点</h2><blockquote><p>半同步通信既能像同步通信那样由统一时钟控制，又能像异步通信那样允许传输时间不一致。</p></blockquote><h2 id="总线标准"><a href="#总线标准" class="headerlink" title="总线标准"></a>总线标准</h2><h3 id="定义"><a href="#定义" class="headerlink" title="定义"></a>定义</h3><blockquote><p>计算机系统的各部件之间利用总线进行信息传输时应遵守的协议和规范，包括硬件和软件两个方面。</p></blockquote><h3 id="意义"><a href="#意义" class="headerlink" title="意义"></a>意义</h3><blockquote><p>计算机系统中各类模块品种及其复杂，往往一种模块要配一种总线，很难在总线上更换、组合各类模块和设备，解决设备之间总线复杂，传输速度慢等一系列问题。</p></blockquote><h3 id="常见总线标准"><a href="#常见总线标准" class="headerlink" title="常见总线标准"></a>常见总线标准</h3><ul><li>ISA（Industrial Standard Architecture）</li><li>EISA（Extended Industry Standard Architecture）</li><li>VESA（Video Electronics Standard Association)</li><li>PCI 分时复用，即插即用</li><li>AGP（Accelerated Graphics Port）（PCI发展而来）</li><li>PCIe（Peripheral Component Interconnect Express）</li><li>USB</li></ul><h3 id="即插即用"><a href="#即插即用" class="headerlink" title="即插即用"></a>即插即用</h3><blockquote><p>是指当板卡插入系统时，系统会自动对板卡所需资源进行分配，如基地址、中断号等，并自动寻找相应的驱动程序；而不象旧的ISA板卡，需要进行复杂的手动配置。<br>如 PCI，USB</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 计算机组成原理与体系结构 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 计算机组成原理与体系结构 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>matlab图像处理基础</title>
      <link href="/2021/08/24/matlab%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%9F%BA%E7%A1%80/"/>
      <url>/2021/08/24/matlab%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<p>主要为matlab图像处理工具箱的基本使用</p><span id="more"></span><h2 id="图像读入"><a href="#图像读入" class="headerlink" title="图像读入"></a>图像读入</h2><p><code>imread(路径)</code></p><p>使用时可赋值给一个变量，实际就是一个二维数组</p><h2 id="图像的基本信息"><a href="#图像的基本信息" class="headerlink" title="图像的基本信息"></a>图像的基本信息</h2><p><code>imfinfo(&#39;demo.png&#39;)</code></p><blockquote><p>会返回一个struct 包含文件名，文件大小，文件格式，宽高等等信息。但是要注意这个参数要填<code>文件名</code><br>最开始尝试的是读入的图片对象，报错了，才知道要写文件名，考虑了一下发现应该是imread只返回一个二维数组，而不是一个图像对象，所以没有这些内容。</p></blockquote><h2 id="图像的二维相关系数"><a href="#图像的二维相关系数" class="headerlink" title="图像的二维相关系数"></a>图像的二维相关系数</h2><p><code>corr2()</code></p><blockquote><p>此函数本质就是去计算两个矩阵的相关系数</p></blockquote><pre class="language-matlab" data-language="matlab"><code class="language-matlab">I <span class="token operator">=</span> <span class="token function">imread</span><span class="token punctuation">(</span><span class="token string">'pout.tif'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>J <span class="token operator">=</span> <span class="token function">medfilt2</span><span class="token punctuation">(</span>I<span class="token punctuation">)</span><span class="token punctuation">;</span>R <span class="token operator">=</span> <span class="token function">corr2</span><span class="token punctuation">(</span>I<span class="token punctuation">,</span>J<span class="token punctuation">)</span></code></pre><h2 id="像素值的获取"><a href="#像素值的获取" class="headerlink" title="像素值的获取"></a>像素值的获取</h2><p><code>impixel()</code></p><blockquote><p>impixel只传入图像变量，则会进入交互界面左键可选中多个像素点，右键选中最后一个像素点并结束交互，显示出RGB颜色<br> <code>impixel(I,[100,20],[40,80])</code> 传入图像和两个长为n的向量，可以获得n个像素值</p></blockquote><h2 id="图像均值与标准差"><a href="#图像均值与标准差" class="headerlink" title="图像均值与标准差"></a>图像均值与标准差</h2><p><code>mean2(I)</code><br><code>std2(I)</code></p><blockquote><p>实质也就是获取的二维矩阵元素的平均值和标准差</p></blockquote><h2 id="图片展示窗口上显示图片信息"><a href="#图片展示窗口上显示图片信息" class="headerlink" title="图片展示窗口上显示图片信息"></a>图片展示窗口上显示图片信息</h2><pre class="language-matlab" data-language="matlab"><code class="language-matlab"><span class="token function">imshow</span><span class="token punctuation">(</span>I<span class="token punctuation">)</span><span class="token punctuation">;</span>impixelinfo<span class="token punctuation">;</span></code></pre><h2 id="图片的缩放，裁剪和旋转"><a href="#图片的缩放，裁剪和旋转" class="headerlink" title="图片的缩放，裁剪和旋转"></a>图片的缩放，裁剪和旋转</h2><p><code>imresize(I,倍数)</code></p><p><code>imcrop(I,rec)</code>  rec为一个向量[左上角x 左上角y 右下角x 右下角y]</p><p><code>imrotate(I,deg)</code> 图像旋转 deg 为角度 注意正值为逆时针 负值为顺时针</p><p>以上操作都返回处理后的图像！</p>]]></content>
      
      
      <categories>
          
          <category> 数字图像处理 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数字图像处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数学建模论文写作</title>
      <link href="/2021/08/17/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C/"/>
      <url>/2021/08/17/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1%E8%AE%BA%E6%96%87%E5%86%99%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<span id="more"></span><h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><blockquote><p>摘要可以等完成作品之后再写<br>内容包括</p><ul><li>建模思想</li><li>数学归类</li><li>算法思想</li><li>建模特点</li><li>主要结果<br>突出方法算法，结论，创新点，特点，不要出现图表和数学公式。<br>尽量不要出现<code>我们</code>这样的词语，可以用本文代替</li></ul></blockquote><h2 id="问题重述"><a href="#问题重述" class="headerlink" title="问题重述"></a>问题重述</h2><ul><li>关键信息提取</li><li>删除不必要信息</li><li>语气转换（如请您……需要更改）</li></ul><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><blockquote><p>可以合到一起写也可以分开一小问一小问分析</p></blockquote><ul><li>问题类型定位</li><li>问题特点</li><li>问题难点</li><li>无关因素剔除</li><li>求解完成之后回来重新改一下问题分析</li></ul><h2 id="提出假设"><a href="#提出假设" class="headerlink" title="提出假设"></a>提出假设</h2><blockquote><p>目的：将问题理想化，简单化</p></blockquote><ul><li>假设需要建立在题目的条件和要求之上</li><li>不能缺少关键性假设</li><li>用严格确切的数学语言来表达假设</li><li>假设需要切合题意</li></ul>]]></content>
      
      
      <categories>
          
          <category> 数学建模 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PAT甲级Counting leaves</title>
      <link href="/2021/08/14/PAT%E7%94%B2%E7%BA%A7Counting%20leaves/"/>
      <url>/2021/08/14/PAT%E7%94%B2%E7%BA%A7Counting%20leaves/</url>
      
        <content type="html"><![CDATA[<h2 id="原题"><a href="#原题" class="headerlink" title="原题"></a>原题</h2><blockquote><p>A family hierarchy is usually presented by a pedigree tree. Your job is to count those family members who have no child.<br>Each input file contains one test case. Each case starts with a line containing <code>0&lt;N&lt;100</code> the number of nodes in a tree, and $M (&lt;N)$, the number of non-leaf nodes. Then M lines follow, each in the format:<br><code>ID K ID[1] ID[2] ... ID[K]</code><br>where ID is a two-digit number representing a given non-leaf node, K is the number of its children, followed by a sequence of two-digit ID’s of its children. For the sake of simplicity, let us fix the root ID to be 01.The input ends with N being 0. That case must NOT be processed.<br>For each test case, you are supposed to count those family members who have no child for every seniority level starting from the root. The numbers must be printed in a line, separated by a space, and there must be no extra space at the end of each line.</p></blockquote><details>  <summary>翻译</summary>一个家族通常用一棵家族树表示，你的个工作是数出没有孩子的家庭成员.每一个输入文件包含一个测试点，每个测试点包含一个` N 0< N < 100` 表示树中的节点数，以及M表示飞叶节点的个数，接啥来的M行每行的格式为：`ID K ID[1] ID[2] ... ID[K]` 其中ID是一个两位数表示非叶节点，K是它孩子的个数，然后依次是他的孩子节点的ID，为了简单起见，我们假设根节点为01。对于每一个测试点，你应该数出每一层叶节点的个数。中间用空格分隔，末尾没有多语空格。</details><h2 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h2><blockquote><p>广度优先搜索,记录每一层叶节点个数</p></blockquote><h2 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h2><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> id<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> child<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m<span class="token punctuation">;</span>    node f<span class="token punctuation">[</span>n <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> id<span class="token punctuation">,</span> num<span class="token punctuation">,</span> c<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cin <span class="token operator">>></span> id <span class="token operator">>></span> num<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            cin <span class="token operator">>></span> c<span class="token punctuation">;</span>            f<span class="token punctuation">[</span>id<span class="token punctuation">]</span><span class="token punctuation">.</span>child<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//队列</span>    queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> q<span class="token punctuation">;</span>    q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//广度优先</span>    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span>q<span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>      <span class="token comment">//计数（此层叶节点）</span>        <span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token comment">//提前记录当前队列中的元素个数（此层的节点数，防止循环内部push导致无法分层）</span>        <span class="token keyword">int</span> l <span class="token operator">=</span> q<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">//遍历此层每个节点</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>          <span class="token comment">//叶节点</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">[</span>q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>child<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                count<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//将每个节点的孩子入队</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> f<span class="token punctuation">[</span>q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>child<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                q<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>f<span class="token punctuation">[</span>q<span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span>child<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//出队头结点</span>            q<span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//输出</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            cout <span class="token operator">&lt;&lt;</span> count<span class="token punctuation">;</span>            flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            cout <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span> <span class="token operator">&lt;&lt;</span> count<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> PAT </tag>
            
            <tag> 树 </tag>
            
            <tag> 广度优先搜索 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>PAT甲级emergency</title>
      <link href="/2021/08/14/Emergency/"/>
      <url>/2021/08/14/Emergency/</url>
      
        <content type="html"><![CDATA[<h2 id="原题及翻译"><a href="#原题及翻译" class="headerlink" title="原题及翻译"></a>原题及翻译</h2><blockquote><p>As an emergency rescue team leader of a city, you are given a special map of your country. The map shows several scattered cities connected by some roads. Amount of rescue teams in each city and the length of each road between any pair of cities are marked on the map. When there is an emergency call to you from some other city, your job is to lead your men to the place as quickly as possible, and at the mean time, call up as many hands on the way as possible.</p></blockquote><details>  <summary>翻译</summary>> 作为一个城市中一支紧急救援队的领导者，你拿到了一张城市的特殊地图。 地图中展现了通过一些路被联系起来的分散城市。每个城市的救援队伍数量和每两个城市之间的路径长度都被标注在了地图上。当你收到来自其他城市的救援呼叫时，你的工作室带领你的队员尽可能块的感到目的地，同时尽可能多的寻求帮助。</details><h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><blockquote><p>这题做过中文版的，太长时间没刷题了迪杰斯特拉算法都有点模糊了，从网上找了个代码顺便复习一下。感觉这个代码写的比我的清晰简洁很多。可以当做模板学习一下<br>基本思路就是迪杰斯特拉算法找出最短路的条数,以及保证路径最短的前提下能召集的最多救援队伍数目。</p></blockquote><h2 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h2><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> C1<span class="token punctuation">,</span> C2<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m <span class="token operator">>></span> C1 <span class="token operator">>></span> C2<span class="token punctuation">;</span>    <span class="token comment">//点权，也就是每个城市救援队的数量</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">weight</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cin <span class="token operator">>></span> weight<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//边，无路用无限大表示</span>    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">>></span> <span class="token function">edge</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token generic-function"><span class="token function">vector</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> INT_MAX<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//到某个点的最短路径</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">dis</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> INT_MAX<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//到某个点的最小路径条数</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">roads</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//到某个点最多可以召集的救援队数量</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">teams</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//访问标记</span>    vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">></span> <span class="token function">visit</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//初始化边权值表</span>    <span class="token keyword">int</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">,</span> L<span class="token punctuation">;</span>    <span class="token comment">//输入</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cin <span class="token operator">>></span> c1 <span class="token operator">>></span> c2 <span class="token operator">>></span> L<span class="token punctuation">;</span>        edge<span class="token punctuation">[</span>c1<span class="token punctuation">]</span><span class="token punctuation">[</span>c2<span class="token punctuation">]</span> <span class="token operator">=</span> edge<span class="token punctuation">[</span>c2<span class="token punctuation">]</span><span class="token punctuation">[</span>c1<span class="token punctuation">]</span> <span class="token operator">=</span> L<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//出发点长度为0</span>    dis<span class="token punctuation">[</span>C1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token comment">//出发点救援队数</span>    teams<span class="token punctuation">[</span>C1<span class="token punctuation">]</span> <span class="token operator">=</span> weight<span class="token punctuation">[</span>C1<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token comment">//一条路到出发点</span>    roads<span class="token punctuation">[</span>C1<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//迪杰斯特拉</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//在未访问的点钟寻找能到达的最短的那条</span>        <span class="token keyword">int</span> u <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> minn <span class="token operator">=</span> INT_MAX<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>visit<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">&lt;</span> minn<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                u <span class="token operator">=</span> j<span class="token punctuation">;</span>                minn <span class="token operator">=</span> dis<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//找不到就结束</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>u <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>            <span class="token keyword">break</span><span class="token punctuation">;</span>        <span class="token comment">//访问这个点</span>        visit<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>        <span class="token comment">//更新点</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> v <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> v <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> v<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token comment">//没有访问并且和u点有路</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>visit<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token boolean">false</span> <span class="token operator">&amp;&amp;</span> edge<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">!=</span> INT_MAX<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//新路优于旧路</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> edge<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">&lt;</span> dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> edge<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>                    roads<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> roads<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>                    teams<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> teams<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> weight<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token comment">//新旧路长度相同</span>                <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>dis<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> edge<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">==</span> dis<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                <span class="token punctuation">&#123;</span>                    <span class="token comment">//路径条数增加</span>                    roads<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> roads<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">+</span> roads<span class="token punctuation">[</span>u<span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token comment">//队伍数量更多</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>teams<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> weight<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">></span> teams<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">)</span>                    <span class="token punctuation">&#123;</span>                        <span class="token comment">//更新队伍数量</span>                        teams<span class="token punctuation">[</span>v<span class="token punctuation">]</span> <span class="token operator">=</span> teams<span class="token punctuation">[</span>u<span class="token punctuation">]</span> <span class="token operator">+</span> weight<span class="token punctuation">[</span>v<span class="token punctuation">]</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> roads<span class="token punctuation">[</span>C2<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">" "</span> <span class="token operator">&lt;&lt;</span> teams<span class="token punctuation">[</span>C2<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> PAT </tag>
            
            <tag> 图 </tag>
            
            <tag> 迪杰斯特拉 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSP-2020-12</title>
      <link href="/2021/08/11/CSP-2020-12/"/>
      <url>/2021/08/11/CSP-2020-12/</url>
      
        <content type="html"><![CDATA[<p>CSP 2020年12月试题</p><span id="more"></span><h2 id="第二题-期末预测之最佳阈值"><a href="#第二题-期末预测之最佳阈值" class="headerlink" title="第二题 期末预测之最佳阈值"></a>第二题 期末预测之最佳阈值</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><blockquote><p>这次考试是刚转完专业考的，迷迷糊糊的只准备了前两道。但是好像和以前的题不一样，这一次难度加大了，暴力搞只能过70%测试点，导致当时200分的目标都没实现。。<br>这次再看这道题，有了一些思路，如果按照安全指数进行降序排序的话，某一点的预测精准度等于前面结果为0的个数+该点及之后同数值的点为1的个数+之后为0的个数，为了提高效率可做两步处理</p><ol><li>输入时统计结果为0的个数</li><li>遍历时记录前面为1的个数<br>这样根据前两个数据就可以算出预测正确的个数<br>然后从头到尾扫描寻找预测效果最好的那个（注意同一预测效果不同阈值的处理）</li></ol></blockquote><h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> y<span class="token punctuation">;</span>    <span class="token keyword">int</span> r<span class="token punctuation">;</span>    <span class="token keyword">int</span> prenum<span class="token punctuation">;</span>    <span class="token keyword">int</span> p<span class="token punctuation">;</span><span class="token punctuation">&#125;</span> s<span class="token punctuation">[</span><span class="token number">100002</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span>node a<span class="token punctuation">,</span> node b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">return</span> a<span class="token punctuation">.</span>y <span class="token operator">></span> b<span class="token punctuation">.</span>y<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> sum0 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> n<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cin <span class="token operator">>></span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">>></span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            sum0<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> s <span class="token operator">+</span> n<span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> pre1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>prenum <span class="token operator">=</span> pre1<span class="token punctuation">;</span>        <span class="token keyword">int</span> j<span class="token punctuation">,</span> t <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p <span class="token operator">=</span> pre1<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span>j <span class="token operator">=</span> i<span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n <span class="token operator">&amp;&amp;</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">==</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p <span class="token operator">+=</span> s<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">//cout &lt;&lt; s[i].y &lt;&lt; ' ' &lt;&lt; s[i].r &lt;&lt; ' ' &lt;&lt; s[i].p &lt;&lt; ' ' &lt;&lt; sum0 - (j - s[i].p) &lt;&lt; endl;</span>        s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p <span class="token operator">+=</span> sum0 <span class="token operator">-</span> <span class="token punctuation">(</span>j <span class="token operator">-</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">)</span><span class="token punctuation">;</span>        pre1 <span class="token operator">+=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> max <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> result<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//cout &lt;&lt; s[i].y &lt;&lt; ' ' &lt;&lt; s[i].p &lt;&lt; endl;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>max <span class="token operator">&lt;</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            max <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>p<span class="token punctuation">;</span>            result <span class="token operator">=</span> s<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> result<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> CSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSP-2021-4</title>
      <link href="/2021/08/11/CSP-2021-4/"/>
      <url>/2021/08/11/CSP-2021-4/</url>
      
        <content type="html"><![CDATA[<p>CSP 2021年4月试题</p><span id="more"></span><h2 id="第一题-灰度直方图"><a href="#第一题-灰度直方图" class="headerlink" title="第一题 灰度直方图"></a>第一题 灰度直方图</h2><h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><blockquote><p>乍一看是一个二维数组模拟灰度值存储，实际上只需要一个一维数组计数即可，类似桶排序，输入一个对应位置加一</p></blockquote><h3 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h3><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> l<span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> m <span class="token operator">>></span> l<span class="token punctuation">;</span>    <span class="token keyword">int</span> temp<span class="token punctuation">;</span>    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">></span> <span class="token function">v</span><span class="token punctuation">(</span>l<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            cin <span class="token operator">>></span> temp<span class="token punctuation">;</span>            v<span class="token punctuation">[</span>temp<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> l<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cout <span class="token operator">&lt;&lt;</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="第二题-邻域均值"><a href="#第二题-邻域均值" class="headerlink" title="第二题 邻域均值"></a>第二题 邻域均值</h2><h3 id="思路"><a href="#思路" class="headerlink" title="思路"></a>思路</h3><blockquote><p>感觉最近两次的第二题暴力算法基本都会超时，只能拿到70分左右，此题也是如此如果对每一个元素循环相加其邻域内的元素相当于增加了两层循环，总循环为4层，会导致30%数据超时，为了提高效率，需要想办法降维。<br>为了提高运算效率，容易想到，提前计算一些东西，在算邻域平均值时可以直接拿来用。<br>此处使用<code>前缀和</code>(数组第k项之前的和)的方式实现，使用一个二维数组rowSum[i][j]表示第i行中j元素之前的所有元素之和，这样就可以通过相减的方式快速算出某一行中某两个元素之间的数字和。这样就减少了一层循环，只需要三层就可完成。成功通过剩余30%测试点</p></blockquote><h3 id="程序-1"><a href="#程序-1" class="headerlink" title="程序"></a>程序</h3><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//dark用于记录暗点个数</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> l<span class="token punctuation">,</span> r<span class="token punctuation">,</span> t<span class="token punctuation">,</span> temp<span class="token punctuation">,</span> dark <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> n <span class="token operator">>></span> l <span class="token operator">>></span> r <span class="token operator">>></span> t<span class="token punctuation">;</span>    <span class="token comment">//row[i][j]为第i行从0到j个的总和</span>    <span class="token keyword">int</span> rowSum<span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">[</span>n<span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            cin <span class="token operator">>></span> temp<span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                rowSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">else</span>            <span class="token punctuation">&#123;</span>                rowSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">=</span> rowSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span>j <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">+</span> temp<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            <span class="token keyword">float</span> tempSum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> tempNum<span class="token punctuation">;</span>            <span class="token comment">//区域的界限</span>            <span class="token keyword">int</span> li <span class="token operator">=</span> i <span class="token operator">-</span> r <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> i <span class="token operator">-</span> r <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> ri <span class="token operator">=</span> i <span class="token operator">+</span> r <span class="token operator">&lt;</span> n <span class="token operator">?</span> i <span class="token operator">+</span> r <span class="token operator">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> lj <span class="token operator">=</span> j <span class="token operator">-</span> r <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> j <span class="token operator">-</span> r <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">;</span>            <span class="token keyword">int</span> rj <span class="token operator">=</span> j <span class="token operator">+</span> r <span class="token operator">&lt;</span> n <span class="token operator">?</span> j <span class="token operator">+</span> r <span class="token operator">:</span> n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> m <span class="token operator">=</span> li<span class="token punctuation">;</span> m <span class="token operator">&lt;=</span> ri<span class="token punctuation">;</span> m<span class="token operator">++</span><span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                <span class="token comment">//此处注意从a到b的和不是rowSum[m][b]-rowSum[m][a]而是rowSum[m][b]-rowSum[m][a-1]同时要注意a-1可能导致的数组越界问题</span>                tempSum <span class="token operator">+=</span> rowSum<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>rj<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token punctuation">(</span>lj <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">>=</span> <span class="token number">0</span> <span class="token operator">?</span> rowSum<span class="token punctuation">[</span>m<span class="token punctuation">]</span><span class="token punctuation">[</span>lj <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">//元素个数和(行数*列数)；</span>            tempNum <span class="token operator">=</span> <span class="token punctuation">(</span>ri <span class="token operator">-</span> li <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>rj <span class="token operator">-</span> lj <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>tempSum <span class="token operator">/</span> tempNum <span class="token operator">&lt;=</span> t<span class="token punctuation">)</span>            <span class="token punctuation">&#123;</span>                dark<span class="token operator">++</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> dark<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> CSP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>回归分析</title>
      <link href="/2021/08/11/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/"/>
      <url>/2021/08/11/%E5%9B%9E%E5%BD%92%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<p>主要包括一元线性回归和多元线性回归，目的在于对拟合方程的效果进行分析</p><span id="more"></span><h2 id="一元线性回归"><a href="#一元线性回归" class="headerlink" title="一元线性回归"></a>一元线性回归</h2><h3 id="使用最小二乘法确定回归系数"><a href="#使用最小二乘法确定回归系数" class="headerlink" title="使用最小二乘法确定回归系数"></a>使用最小二乘法确定回归系数</h3><h3 id="用样本值对回归系数进行点估计"><a href="#用样本值对回归系数进行点估计" class="headerlink" title="用样本值对回归系数进行点估计"></a>用样本值对回归系数进行点估计</h3><h3 id="对回归系数做假设检验"><a href="#对回归系数做假设检验" class="headerlink" title="对回归系数做假设检验"></a>对回归系数做假设检验</h3><ul><li>F检验</li><li>t检验</li><li>r检验</li></ul><h3 id="在-x-x-0-处对y做预测，并进行区间估计"><a href="#在-x-x-0-处对y做预测，并进行区间估计" class="headerlink" title="在$x=x_0$处对y做预测，并进行区间估计"></a>在$x=x_0$处对y做预测，并进行区间估计</h3>]]></content>
      
      
      <categories>
          
          <category> 数学建模 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
            <tag> 数据分析 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>灰色理论</title>
      <link href="/2021/08/06/%E7%81%B0%E8%89%B2%E7%90%86%E8%AE%BA/"/>
      <url>/2021/08/06/%E7%81%B0%E8%89%B2%E7%90%86%E8%AE%BA/</url>
      
        <content type="html"><![CDATA[<p>灰色预测模型是通过少量的、不完全的信息，建立数学模型做出预测的一种预测方法。其基于客观事物的过去和现在的发展规律，借助于科学的方法对未来的发展趋势和状况进行描述和分析，并形成科学的假设和判断。</p><p>优势为：</p><ul><li>所需建模信息少</li><li>运算方便</li><li>建模精度高</li><li>可以客服传统回归分析等方法存在的需求数据量大，计算量大，可能出现反常情况等的弊端。<span id="more"></span></li></ul><h2 id="常用预测模型"><a href="#常用预测模型" class="headerlink" title="常用预测模型"></a>常用预测模型</h2><ul><li>微分方程</li><li>差分方程</li><li>马尔科夫预测方程</li><li>灰色预测法</li><li>时间序列</li><li>插值拟合</li><li>神经元拟合</li></ul><blockquote><p>warning<br>没有万能的方法，需要根据实际场景选用合适的模型！！</p></blockquote><h2 id="什么是灰色系统"><a href="#什么是灰色系统" class="headerlink" title="什么是灰色系统"></a>什么是灰色系统</h2><p>灰色是指，我们的数据并不是完全确定的，既含有已知信息又含有未知信息的系统称为灰色系统。</p><h3 id="白色系统"><a href="#白色系统" class="headerlink" title="白色系统"></a>白色系统</h3><blockquote><p>系统内部特征完全已知，即系统的信息是完全充分的</p></blockquote><h3 id="黑色系统"><a href="#黑色系统" class="headerlink" title="黑色系统"></a>黑色系统</h3><blockquote><p>内部特征完全未知，只可以通过与外界的联系来加一观测研究</p></blockquote><h3 id="灰色系统"><a href="#灰色系统" class="headerlink" title="灰色系统"></a>灰色系统</h3><blockquote><p>部分信息已知，对一定范围内变化的与时间有关的灰色过程进行预测</p></blockquote><h2 id="灰色预测模型适用场景"><a href="#灰色预测模型适用场景" class="headerlink" title="灰色预测模型适用场景"></a>灰色预测模型适用场景</h2><p>比如：根据前几天的降雨量，预测明天的降雨量；根据近几年河水污染程度，预测未来污染走势。</p><p>应用范畴：</p><ul><li>灰色关联分析</li><li>灰色预测：人口预测，灾难预测等</li><li>灰色决策</li><li>灰色预测控制</li></ul><h2 id="基本思路"><a href="#基本思路" class="headerlink" title="基本思路"></a>基本思路</h2><p>鉴别系统因素之间发展趋势的相异程度，进行关联分析，找出规律，生成有较强规律性的数据序列，然后建立相应的微分方程模型，从而预测事物未来发展趋势的状况</p><p>利用等时距观测到的反应预测对象特征的一系列数量值构造模型</p><h2 id="常见类型"><a href="#常见类型" class="headerlink" title="常见类型"></a>常见类型</h2><ul><li>灰色时间序列预测</li><li>畸变预测（通过已有异常值出现时间预测未来异常值出现的时间）</li><li>系统预测</li><li>拓扑预测（将原始数据做成曲线，在曲线上按照定值寻找该定值发生的所有时间点，构成点时序列，然后预测未来该定值发生时间）</li></ul><h2 id="灰色关联度与优势分析"><a href="#灰色关联度与优势分析" class="headerlink" title="灰色关联度与优势分析"></a>灰色关联度与优势分析</h2><blockquote><p>需要分析哪些因素是对系统来说是主要的，哪些是次要的，哪些是需要抑制的。<br>关注点应该在于，因素间的关联性，关联程度和如何量化。</p></blockquote><h2 id="灰色关联度"><a href="#灰色关联度" class="headerlink" title="灰色关联度"></a>灰色关联度</h2><blockquote><p>可以选最优有点类似层次分析法</p></blockquote><ul><li>选取参考数列</li><li>m个比较数列</li><li>算出m个关联度</li></ul><h2 id="灰色生成数列"><a href="#灰色生成数列" class="headerlink" title="灰色生成数列"></a>灰色生成数列</h2><blockquote><p>目的：弱化数据的随机性<br>方法：</p><ul><li>累加法 -》能使任意非负数列转化为非减递增的。</li><li>累减法 -》具有求导性质</li><li>加权邻值生成</li></ul></blockquote><h2 id="灰色模型-G-M（1-1）"><a href="#灰色模型-G-M（1-1）" class="headerlink" title="灰色模型 G M（1,1）"></a>灰色模型 G M（1,1）</h2><blockquote><p>G表示灰色 M表示模型</p></blockquote><h3 id="建模步骤"><a href="#建模步骤" class="headerlink" title="建模步骤"></a>建模步骤</h3><ol><li>数据检验和处理（<code>级比检验</code>）<blockquote><p>目的为保证建模方法的可行性<br>如果所有的前一个数除下一个数都落在一个区间内即可进行灰色预测。<br>如果不可以的话可以尝试对数据进行平移变换（一般为统一加上一个数）再进行检验<br>如果还是不行，马上改用其他方法模型。</p></blockquote></li><li>建立GM模型</li><li>利用最小二乘法求解a,b</li><li>建立微分方程</li><li>累减法获得预测值</li><li>检验！！<ol><li>残差检验</li><li>级比偏差值检验</li></ol></li></ol>]]></content>
      
      
      <categories>
          
          <category> 数学建模 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>插值拟合算法</title>
      <link href="/2021/08/03/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/"/>
      <url>/2021/08/03/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>用于处理数据缺失，基本思想是根据周围点建立联系，以补充缺失数据，或者预测未来的数据。</p><span id="more"></span><h2 id="插值与拟合的应用方向区别"><a href="#插值与拟合的应用方向区别" class="headerlink" title="插值与拟合的应用方向区别"></a>插值与拟合的应用方向区别</h2><blockquote><p>每隔一个小时测一次温度，测12小时</p><ul><li>如果第6个小时忘记测了，根据规律补上一个—–&gt; 插值</li><li>如果想要得知12小时以后的 ——&gt; 拟合</li></ul></blockquote><h2 id="插值问题"><a href="#插值问题" class="headerlink" title="插值问题"></a>插值问题</h2><blockquote><p>归结为已知函数在某区间内若干点处的值，求函数在该区间内其他点处的值。<br>已知函数$x_0,x_1,x_2\cdots x_n$处的值为$y_0,y_1,y_2\cdots y_n$求简单函数$p(x)$,使得$p(x_i)=y_i$.</p></blockquote><h3 id="拉格朗日插值法"><a href="#拉格朗日插值法" class="headerlink" title="拉格朗日插值法"></a>拉格朗日插值法</h3><p>具体可参考<a href="https://www.zhihu.com/question/58333118">知乎-如何直观地理解拉格朗日插值法？</a></p><h3 id="牛顿插值"><a href="#牛顿插值" class="headerlink" title="牛顿插值"></a>牛顿插值</h3><h3 id="高次插值的Runge现象"><a href="#高次插值的Runge现象" class="headerlink" title="高次插值的Runge现象"></a>高次插值的Runge现象</h3><blockquote><p>warning<br>插值多项式并不是次数越高越好</p></blockquote><p><code>Runge现象</code>：使用高次插值的时候在边缘产生的震荡现象</p><p>所以再实际中不应该使用七次以上的插值</p><blockquote><p>避免Runge现象<br>将插值区间分为若干小区间，在每个小区间呗用地刺插值，分段低次插值。</p></blockquote><h3 id="Matlab插值"><a href="#Matlab插值" class="headerlink" title="Matlab插值"></a>Matlab插值</h3><h4 id="一维"><a href="#一维" class="headerlink" title="一维"></a>一维</h4><p><a href="https://ww2.mathworks.cn/help/matlab/ref/interp1.html">官方文档</a></p><pre class="language-matlab" data-language="matlab"><code class="language-matlab">yi<span class="token operator">=</span><span class="token function">interp1</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>xi<span class="token punctuation">,</span><span class="token string">'method'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><blockquote><p>x,y为插值点（已知），xi,yi为被插值点和插值结果（可以试单一点，也可以是向量）method为插值方法可以选用：</p><ul><li>nearest 最邻近插值</li><li>linear 线性插值(默认方法)</li><li>spline 三次样条插值(效果相对好)</li><li>cubic 立方插值</li></ul></blockquote><p>matlab拉格朗日插值需要手写。代码如下</p><pre class="language-matlab" data-language="matlab"><code class="language-matlab"><span class="token keyword">function</span> y<span class="token operator">=</span><span class="token function">lagrange</span><span class="token punctuation">(</span>x0<span class="token punctuation">,</span>y0<span class="token punctuation">,</span>x<span class="token punctuation">)</span>   <span class="token comment">%x0,y0为初始坐标，x为需要插值的点，返回的y为插值结果</span>n<span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>x0<span class="token punctuation">)</span><span class="token punctuation">;</span>m<span class="token operator">=</span><span class="token function">length</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token keyword">for</span> <span class="token number">i</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>m    z<span class="token operator">=</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    s<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token number">j</span><span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n        p<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>        <span class="token keyword">for</span> k<span class="token operator">=</span><span class="token number">1</span><span class="token operator">:</span>n            <span class="token keyword">if</span> k<span class="token operator">~=</span><span class="token number">j</span>                p<span class="token operator">=</span>p<span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">(</span>z<span class="token operator">-</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">/</span><span class="token punctuation">(</span><span class="token function">x0</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">-</span><span class="token function">x0</span><span class="token punctuation">(</span><span class="token number">j</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">end</span>        <span class="token keyword">end</span>        s<span class="token operator">=</span>p<span class="token operator">*</span><span class="token function">y0</span><span class="token punctuation">(</span>k<span class="token punctuation">)</span><span class="token operator">+</span>s<span class="token punctuation">;</span>    <span class="token keyword">end</span>    <span class="token function">y</span><span class="token punctuation">(</span><span class="token number">i</span><span class="token punctuation">)</span><span class="token operator">=</span>s<span class="token punctuation">;</span><span class="token keyword">end</span></code></pre><h4 id="二维"><a href="#二维" class="headerlink" title="二维"></a>二维</h4><p>可以将三维图变得更加平缓圆润</p><p><a href="https://ww2.mathworks.cn/help/matlab/ref/interp2.html?searchHighlight=interp2&s_tid=srchtitle">zi=interp2(x,y,z,xi,yi,’method’)</a></p><p>method: </p><ul><li>nearest 最邻近插值</li><li>linear 双线性插值</li><li>spline 双上次样条插值</li><li>cubic 双立方插值</li></ul><h4 id="散乱插值"><a href="#散乱插值" class="headerlink" title="散乱插值"></a>散乱插值</h4><blockquote><p>二维插值插值点都在网格点上，但是有时可能需要在格子内部插入散乱点，此时使用 散乱插值</p></blockquote><p><a href="https://ww2.mathworks.cn/help/matlab/ref/griddata.html?searchHighlight=griddata&s_tid=srchtitle">griddata(x,y,z,xi,yi,’method’)</a></p>]]></content>
      
      
      <categories>
          
          <category> 数学建模 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 数学建模 </tag>
            
            <tag> 数据处理 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>STM32+keil5环境配置踩坑</title>
      <link href="/2021/08/02/STM32%20keil%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%B8%A9%E5%9D%91/"/>
      <url>/2021/08/02/STM32%20keil%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E8%B8%A9%E5%9D%91/</url>
      
        <content type="html"><![CDATA[<p>环境配置主要参考了<a href="https://blog.csdn.net/daniaoxp/article/details/100101149">海创电子的教程</a>,但应该是keil5新版本问题，配置过程中出现了很多问题，本文将进行一个总结</p><span id="more"></span><h2 id="C-环境的Define填写"><a href="#C-环境的Define填写" class="headerlink" title="C++环境的Define填写"></a>C++环境的Define填写</h2><p>只需要填写<code>USE_STDPERIPH_DRIVER</code>即可，否则会有大量报错出现，好像是由于新版本默认会给添加这个东西</p><h2 id="程序烧录后不自动复位"><a href="#程序烧录后不自动复位" class="headerlink" title="程序烧录后不自动复位"></a>程序烧录后不自动复位</h2><p>需要改两个地方：</p><ol><li>依次点击options for target -&gt; debug -&gt; setting</li><li>在flashdownload中将reset and run 勾选上</li><li>在pack中将enable取消勾选</li><li>保存即可</li></ol>]]></content>
      
      
      <categories>
          
          <category> 硬件开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 硬件开发 </tag>
            
            <tag> STM32 </tag>
            
            <tag> keil5 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>数模转换</title>
      <link href="/2021/07/31/%E6%95%B0%E6%A8%A1%E8%BD%AC%E6%8D%A2/"/>
      <url>/2021/07/31/%E6%95%B0%E6%A8%A1%E8%BD%AC%E6%8D%A2/</url>
      
        <content type="html"><![CDATA[<p>学习AD/DA转换</p><span id="more"></span><h2 id="ESP32-Arduino开发环境"><a href="#ESP32-Arduino开发环境" class="headerlink" title="ESP32 Arduino开发环境"></a>ESP32 Arduino开发环境</h2><h3 id="ADC"><a href="#ADC" class="headerlink" title="ADC"></a>ADC</h3><blockquote><p>即将模拟信号转化为数字信号，0-3.3V等比例映射为0-4095<br>方法：<code>analogRead(引脚);</code>即可返回数字值</p></blockquote><h3 id="DAC"><a href="#DAC" class="headerlink" title="DAC"></a>DAC</h3><blockquote><p>根据设定的数字输出相应的电压值，范围为0-255对应输出电压为 x/255*电源电压<br>函数：<code>dacWrite(25, 100);</code><br>25 26 引脚为DAV</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 硬件开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 硬件开发 </tag>
            
            <tag> Arduino </tag>
            
            <tag> ESP32 </tag>
            
            <tag> AD </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>查课表功能的实现</title>
      <link href="/2021/07/29/%E8%AF%BE%E8%A1%A8%E5%88%B6%E4%BD%9C/"/>
      <url>/2021/07/29/%E8%AF%BE%E8%A1%A8%E5%88%B6%E4%BD%9C/</url>
      
        <content type="html"><![CDATA[<p>需要为新生设计一个查课表的应用（入学一段时间内无法登陆教务系统，所以课表获取难），基本思路用自己的账号模拟登陆学校的教务系统，爬取课表，根据输入的班级查询，并存储数据库。</p><p>难点：<br>    - 数据的获取<br>    - 课表界面的设计</p><p>技术：<code>php</code> <code>html&amp;js&amp;css</code> <code>curl</code></p><span id="more"></span><h2 id="模拟登陆教务系统并存储cookie"><a href="#模拟登陆教务系统并存储cookie" class="headerlink" title="模拟登陆教务系统并存储cookie"></a>模拟登陆教务系统并存储cookie</h2><p>本项目的爬虫使用php curl实现，这部分没啥好记录的</p><h2 id="获取班级列表"><a href="#获取班级列表" class="headerlink" title="获取班级列表"></a>获取班级列表</h2><blockquote><p>由于班级列表时分页的，懒得爬了，而且里面也有好多无用信息，所以直接手动导出了一份班级信息的js文件。由于我校专业太多，按照学院进行一个划分，（数据中每一条包括班级名和所属学院名），利用了js的set提取出了不重复的学院数组。<br>前端用了两个select下拉列表（使用的<a href="https://developer.snapappointments.com/bootstrap-select/">bootstrap-select</a>框架，这个功能比较多，主要是可以指定下拉列表每一页显示几条数据，来防止下拉菜单过长）<br>首先将学院数组逐条加入到select中作为option，然后添加监听器，当select改变时，动态更改该学院下的班级列表，<br>至此可以获取到前台用户想要查询的班级号（我校课表接口需要班级号），用Ajax与后台进行交互</p></blockquote><h2 id="后台爬虫"><a href="#后台爬虫" class="headerlink" title="后台爬虫"></a>后台爬虫</h2><blockquote><p>利用前台传过来的班级号，带着前面存储下来的cookie（不带的话会被踢出去<del>.</del>）进行请求，<br>由于每一次请求需要较长时间，所以使用了MySQL存下来每个班的课表信息，以后如果要查的信息数据库中有就不用了爬了！！</p></blockquote><h3 id="此部分遇到的问题"><a href="#此部分遇到的问题" class="headerlink" title="此部分遇到的问题"></a>此部分遇到的问题</h3><ul><li><p>爬取的数据怎么处理emm？</p><ul><li>只能说好乱又是数组又是对象的，只能静下心来一层一层分析，将无用数据剔除</li></ul></li><li><p>存数据库(此问题纯粹是因为数据库没学好)</p><ul><li>最开始用的<code>varchar</code>然后发现只存了一部分，才发现存不下！！我以为这个就是无限制的，但是都想改用文件存了~，然后发现字段改成<code>txt</code>就好了</li></ul></li><li><p>有的时候由于网络问题爬取失败</p><ul><li>用了一个try catch</li></ul></li></ul><h2 id="课表界面的编写"><a href="#课表界面的编写" class="headerlink" title="课表界面的编写"></a>课表界面的编写</h2><blockquote><p>先简单说一下传回来的数据主要字段内容：课程名，课程地点，上课时间（周几），开始节数，持续节数<br>界面设计，用了table 给格子设置了固定的宽高（宽是百分比平分的）<br>遍历数据，根据持续时间将开始节数与下面的单元格合并，并写上课程信息。<br>设计样式：主要是一个多颜色背景，使用了颜色数组，每一个课程的背景从数组中选一个(用的取余方式，没用随机)，添加一个<code>border-radius</code><br>添加点击事件点击后使用bootstrap的弹窗进行一个详细信息的展示</p></blockquote><h3 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h3><blockquote><p>表格边框设定<br>字体太大了（因为手机端为主，浏览器有默认最小字体12px）采用了12px 再利用css进行缩小</p></blockquote><pre class="language-css" data-language="css"><code class="language-css"> <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span> <span class="token property">transform</span><span class="token punctuation">:</span> <span class="token function">scale</span><span class="token punctuation">(</span>0.83<span class="token punctuation">,</span> 0.83<span class="token punctuation">)</span><span class="token punctuation">;</span>*<span class="token property">font-size</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span></code></pre><blockquote><p>由于课程块的展示会改变原有样式，下次查询的时候如果不清除就会错乱，方便起见，将初始内容用字符串保存，每次查询将固定的内容插入，之后想咋改咋改，也不会影响下一次内容</p></blockquote><h3 id="待解决问题"><a href="#待解决问题" class="headerlink" title="待解决问题"></a>待解决问题</h3><blockquote><p>明知有bug却解决不了哎，就是课程冲突问题，如果同一时间段课表上有两个课程，就会错乱，暂未解决，目前大概思路有两条<br>一是提前处理数据，将同一时间的数据合并；二是再对单元格进行切分，并排显示<br>由于最近要准备国电赛，不想写了，而且看了看新生课表绝大部分不会出现这个bug，之后有时间再改吧（啊不就是懒）<br>默默的加上了一句，请以开学后的实际课表为主，防止到时候按这个上课导致上错课或不知道上课，罪过罪过</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 开发经历 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> 后端 </tag>
            
            <tag> PHP </tag>
            
            <tag> JS </tag>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
            <tag> MySQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>兔子试毒问题</title>
      <link href="/2021/07/28/%E5%85%94%E5%AD%90%E8%AF%95%E6%AF%92/"/>
      <url>/2021/07/28/%E5%85%94%E5%AD%90%E8%AF%95%E6%AF%92/</url>
      
        <content type="html"><![CDATA[<p>偶然看到一篇文章讲的是一个兔子试毒问题，问题描述如下：<br>有1000瓶药水，其中一瓶是毒药，喝上一滴一天后死亡，现在有一批兔子用于试毒，怎么花费最少的兔子，用最少的时间找出这批药水呢？</p><span id="more"></span><h2 id="问题抽象"><a href="#问题抽象" class="headerlink" title="问题抽象"></a>问题抽象</h2><p>可以将问题抽象为时间与空间的决策，目标是在两者之间找出一个相对最优的方法。为此我们先想一下两种极端：</p><ul><li>追求极致的时间：需要一天和1000只兔子</li><li>追求极致的空间：需要1只兔子，最坏需要1000天，最好只要一天（倒霉的兔子喝了第一滴就die了），平均下来就是500天，时间复杂度为O(n)</li></ul><h2 id="分治策略"><a href="#分治策略" class="headerlink" title="分治策略"></a>分治策略</h2><blockquote><p>分治策略中比较容易想到的就是二分查找，从这个算法联想到本问题，二分中的找数–&gt;试毒中找那个毒药水。<br>怎么做呢？<br>我们先用两只兔子，将1000瓶分为两份，兔1灌500瓶（中的一滴），兔2灌另500瓶，一天后发现有只兔子die了，name毒药水肯定出在这500瓶中，然后我们再加一只兔子，再各喝一半，以此类推，直到剩下2瓶，此时一兔一瓶，ok了，谁死谁喝的毒药水。</p></blockquote><p>然后我们还可以根据需求平衡一下，比如采用三分，四分…….等等，兔子越多，时间越短</p><h2 id="更好的方法！"><a href="#更好的方法！" class="headerlink" title="更好的方法！"></a>更好的方法！</h2><blockquote><p>我也以为分治就是解决此问题的最优解法了，但是看了文章发现并非如此。有一种方法可以用10只兔子在一天内解决问题<br>作者提供了一个二进制编码的方式。1000瓶药，1000个编码，二进制的话就至少需要10位，然后我们进行编码0000000001为药水1我们给最后一只兔子喝下，0000000010，我们给倒数第二只喝下，0000000011，给后两只喝下……..也就时当前药水编码中为1的喝下，一天后观察去世兔子的编号，由于只有一瓶药水有毒，我们就可以还原出毒药水的编号，直接解决问题。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> 二分 </tag>
            
            <tag> 进制 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>图片点击预览</title>
      <link href="/2021/07/28/%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E9%A2%84%E8%A7%88%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0/"/>
      <url>/2021/07/28/%E5%9B%BE%E7%89%87%E7%82%B9%E5%87%BB%E9%A2%84%E8%A7%88%E5%89%8D%E7%AB%AF%E5%AE%9E%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<blockquote><p>通过lightbox库实现点击图片后放大预览效果</p></blockquote><span id="more"></span><h2 id="下载库支持"><a href="#下载库支持" class="headerlink" title="下载库支持"></a>下载库支持</h2><p><a href="https://github.com/lokesh/lightbox2/tree/dev/src">lightbox github地址</a></p><p>只需要<code>lightbox.js</code>和<code>light.css</code>两个文件</p><p>也可直接复制以下代码并分别命名为<code>lightbox.js</code>,<code>light.css</code></p><details>  <summary>lightbox.js</summary><pre class="language-javascript" data-language="javascript"><code class="language-javascript"><span class="token comment">/*! * Lightbox v2.11.2 * by Lokesh Dhakar * * More info: * http://lokeshdhakar.com/projects/lightbox2/ * * Copyright Lokesh Dhakar * Released under the MIT license * https://github.com/lokesh/lightbox2/blob/master/LICENSE * * @preserve */</span><span class="token comment">// Uses Node, AMD or browser globals to create a module.</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">root<span class="token punctuation">,</span> factory</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span> <span class="token operator">&amp;&amp;</span> define<span class="token punctuation">.</span>amd<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// AMD. Register as an anonymous module.</span>        <span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'jquery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> factory<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> exports <span class="token operator">===</span> <span class="token string">'object'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Node. Does not work with strict CommonJS, but</span>        <span class="token comment">// only CommonJS-like environments that support module.exports,</span>        <span class="token comment">// like Node.</span>        module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jquery'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Browser globals (root is window)</span>        root<span class="token punctuation">.</span>lightbox <span class="token operator">=</span> <span class="token function">factory</span><span class="token punctuation">(</span>root<span class="token punctuation">.</span>jQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>    <span class="token keyword">function</span> <span class="token function">Lightbox</span><span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>album <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// options</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>options <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor<span class="token punctuation">.</span>defaults<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">option</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">// Descriptions of all options available on the demo site:</span>    <span class="token comment">// http://lokeshdhakar.com/projects/lightbox2/index.html#options</span>    Lightbox<span class="token punctuation">.</span>defaults <span class="token operator">=</span> <span class="token punctuation">&#123;</span>        albumLabel<span class="token operator">:</span> <span class="token string">'Image %1 of %2'</span><span class="token punctuation">,</span>        alwaysShowNavOnTouchDevices<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        fadeDuration<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>        fitImagesInViewport<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        imageFadeDuration<span class="token operator">:</span> <span class="token number">600</span><span class="token punctuation">,</span>        <span class="token comment">// maxWidth: 800,</span>        <span class="token comment">// maxHeight: 600,</span>        positionFromTop<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>        resizeDuration<span class="token operator">:</span> <span class="token number">700</span><span class="token punctuation">,</span>        showImageNumberLabel<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>        wrapAround<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        disableScrolling<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>        <span class="token comment">/*        Sanitize Title        If the caption data is trusted, for example you are hardcoding it in, then leave this to false.        This will free you to add html tags, such as links, in the caption.            If the caption data is user submitted or from some other untrusted source, then set this to true        to prevent xss and other injection attacks.         */</span>        sanitizeTitle<span class="token operator">:</span> <span class="token boolean">false</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">option</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        $<span class="token punctuation">.</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">imageCountLabel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">currentImageNum<span class="token punctuation">,</span> totalImages</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>albumLabel<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%1</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> currentImageNum<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">%2</span><span class="token regex-delimiter">/</span><span class="token regex-flags">g</span></span><span class="token punctuation">,</span> totalImages<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token comment">// Both enable and build methods require the body tag to be in the DOM.</span>        <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ready</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span><span class="token function">enable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            self<span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Loop through anchors and areamaps looking for either data-lightbox attributes or rel attributes</span>    <span class="token comment">// that contain 'lightbox'. When these are clicked, start lightbox.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">enable</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token string">'a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>currentTarget<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Build html for the lightbox and the overlay.</span>    <span class="token comment">// Attach event handlers to the new DOM elements. click click click</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">build</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#lightbox'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token comment">// The two root notes generated, #lightboxOverlay and #lightbox are given</span>        <span class="token comment">// tabindex attrs so they are focusable. We attach our keyboard event</span>        <span class="token comment">// listeners to these two elements, and not the document. Clicking anywhere</span>        <span class="token comment">// while Lightbox is opened will keep the focus on or inside one of these</span>        <span class="token comment">// two elements.</span>        <span class="token comment">//</span>        <span class="token comment">// We do this so we can prevent propogation of the Esc keypress when</span>        <span class="token comment">// Lightbox is open. This prevents it from intefering with other components</span>        <span class="token comment">// on the page below.</span>        <span class="token comment">//</span>        <span class="token comment">// Github issue: https://github.com/lokesh/lightbox2/issues/663</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'&lt;div id="lightboxOverlay" tabindex="-1" class="lightboxOverlay">&lt;/div>&lt;div id="lightbox" tabindex="-1" class="lightbox">&lt;div class="lb-outerContainer">&lt;div class="lb-container">&lt;img class="lb-image" src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==" alt=""/>&lt;div class="lb-nav">&lt;a class="lb-prev" aria-label="Previous image" href="" >&lt;/a>&lt;a class="lb-next" aria-label="Next image" href="" >&lt;/a>&lt;/div>&lt;div class="lb-loader">&lt;a class="lb-cancel">&lt;/a>&lt;/div>&lt;/div>&lt;/div>&lt;div class="lb-dataContainer">&lt;div class="lb-data">&lt;div class="lb-details">&lt;span class="lb-caption">&lt;/span>&lt;span class="lb-number">&lt;/span>&lt;/div>&lt;div class="lb-closeContainer">&lt;a class="lb-close">&lt;/a>&lt;/div>&lt;/div>&lt;/div>&lt;/div>'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendTo</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Cache jQuery objects</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#lightbox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#lightboxOverlay'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-outerContainer'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$container <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-container'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$image <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-image'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$nav <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-nav'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Store css values for future lookup</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>containerPadding <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            top<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-top'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            right<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-right'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            bottom<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-bottom'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            left<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$container<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'padding-left'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>imageBorderWidth <span class="token operator">=</span> <span class="token punctuation">&#123;</span>            top<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$image<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-top-width'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            right<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$image<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-right-width'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            bottom<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$image<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-bottom-width'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span>            left<span class="token operator">:</span> <span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>$image<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'border-left-width'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">// Attach event handlers to the newly minted DOM elements</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'lightbox'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'id'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'lightbox'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prev'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>currentImageIndex <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>currentImageIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>currentImageIndex <span class="token operator">===</span> self<span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>currentImageIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">/*          Show context menu for image on right-click              There is a div containing the navigation that spans the entire image and lives above of it. If          you right-click, you are right clicking this div and not the image. This prevents users from          saving the image or using other context menu actions with the image.              To fix this, when we detect the right mouse button is pressed down, but not yet clicked, we          set pointer-events to none on the nav div. This is so that the upcoming right-click event on          the next mouseup will bubble down to the image. Once the right-click/contextmenu event occurs          we set the pointer events back to auto for the nav div so it can capture hover and left-click          events as usual.         */</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$nav<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'mousedown'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>event<span class="token punctuation">.</span>which <span class="token operator">===</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                self<span class="token punctuation">.</span>$nav<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'pointer-events'</span><span class="token punctuation">,</span> <span class="token string">'none'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                self<span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">one</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>$nav<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'pointer-events'</span><span class="token punctuation">,</span> <span class="token string">'auto'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-loader, .lb-close'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Show overlay and lightbox. If the image is part of a set, add siblings to album array.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">start</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">$link</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> $window <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span>        $window<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> $<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>sizeOverlay<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">sizeOverlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>album <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> imageNumber <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">addToAlbum</span><span class="token punctuation">(</span><span class="token parameter">$link</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span>album<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                alt<span class="token operator">:</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-alt'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                link<span class="token operator">:</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>                title<span class="token operator">:</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-title'</span><span class="token punctuation">)</span> <span class="token operator">||</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">)</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// Support both data-lightbox attribute and rel attribute implementations</span>        <span class="token keyword">var</span> dataLightboxValue <span class="token operator">=</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'data-lightbox'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> $links<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>dataLightboxValue<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            $links <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>$link<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'tagName'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'[data-lightbox="'</span> <span class="token operator">+</span> dataLightboxValue <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> $links<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">=</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">addToAlbum</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>$links<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>$links<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> $link<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    imageNumber <span class="token operator">=</span> i<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>$link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'rel'</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">'lightbox'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// If image is not part of a set</span>                <span class="token function">addToAlbum</span><span class="token punctuation">(</span>$link<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// If image is part of a set</span>                $links <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>$link<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'tagName'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'[rel="'</span> <span class="token operator">+</span> $link<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'rel'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'"]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> $links<span class="token punctuation">.</span>length<span class="token punctuation">;</span> j <span class="token operator">=</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token function">addToAlbum</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>$links<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>$links<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">===</span> $link<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        imageNumber <span class="token operator">=</span> j<span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>        <span class="token comment">// Position Lightbox</span>        <span class="token keyword">var</span> top <span class="token operator">=</span> $window<span class="token punctuation">.</span><span class="token function">scrollTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>positionFromTop<span class="token punctuation">;</span>        <span class="token keyword">var</span> left <span class="token operator">=</span> $window<span class="token punctuation">.</span><span class="token function">scrollLeft</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>            top<span class="token operator">:</span> top <span class="token operator">+</span> <span class="token string">'px'</span><span class="token punctuation">,</span>            left<span class="token operator">:</span> left <span class="token operator">+</span> <span class="token string">'px'</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>fadeDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Disable scrolling of the page while open</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disableScrolling<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'lb-disable-scrolling'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span>imageNumber<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Hide most UI elements in preparation for the animated resizing of the lightbox.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">changeImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imageNumber</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> filename <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span>imageNumber<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token keyword">var</span> filetype <span class="token operator">=</span> filename<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">'.'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> $image <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-image'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Disable keyboard nav during transitions</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">disableKeyboardNav</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// Show loading state</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>fadeDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.lb-loader'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">'slow'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'animating'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token comment">// When image to show is preloaded, we send the width and height to sizeContainer()</span>        <span class="token keyword">var</span> preloader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        preloader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> $preloader<span class="token punctuation">;</span>            <span class="token keyword">var</span> imageHeight<span class="token punctuation">;</span>            <span class="token keyword">var</span> imageWidth<span class="token punctuation">;</span>            <span class="token keyword">var</span> maxImageHeight<span class="token punctuation">;</span>            <span class="token keyword">var</span> maxImageWidth<span class="token punctuation">;</span>            <span class="token keyword">var</span> windowHeight<span class="token punctuation">;</span>            <span class="token keyword">var</span> windowWidth<span class="token punctuation">;</span>            $image<span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                <span class="token string">'alt'</span><span class="token operator">:</span> self<span class="token punctuation">.</span>album<span class="token punctuation">[</span>imageNumber<span class="token punctuation">]</span><span class="token punctuation">.</span>alt<span class="token punctuation">,</span>                <span class="token string">'src'</span><span class="token operator">:</span> filename            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            $preloader <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>preloader<span class="token punctuation">)</span><span class="token punctuation">;</span>            $image<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>width<span class="token punctuation">)</span><span class="token punctuation">;</span>            $image<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>            windowWidth <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            windowHeight <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Calculate the max image dimensions for the current viewport.</span>            <span class="token comment">// Take into account the border around the image and an additional 10px gutter on each side.</span>            maxImageWidth <span class="token operator">=</span> windowWidth <span class="token operator">-</span> self<span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>left <span class="token operator">-</span> self<span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>right <span class="token operator">-</span> self<span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>left <span class="token operator">-</span> self<span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>right <span class="token operator">-</span> <span class="token number">20</span><span class="token punctuation">;</span>            maxImageHeight <span class="token operator">=</span> windowHeight <span class="token operator">-</span> self<span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>top <span class="token operator">-</span> self<span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>bottom <span class="token operator">-</span> self<span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>top <span class="token operator">-</span> self<span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>bottom <span class="token operator">-</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>positionFromTop <span class="token operator">-</span> <span class="token number">70</span><span class="token punctuation">;</span>            <span class="token comment">/*            Since many SVGs have small intrinsic dimensions, but they support scaling            up without quality loss because of their vector format, max out their            size.            */</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>filetype <span class="token operator">===</span> <span class="token string">'svg'</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                $image<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>maxImageWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>                $image<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>maxImageHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// Fit image inside the viewport.</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>fitImagesInViewport<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token comment">// Check if image size is larger then maxWidth|maxHeight in settings</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxWidth <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxWidth <span class="token operator">&lt;</span> maxImageWidth<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    maxImageWidth <span class="token operator">=</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxWidth<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxHeight <span class="token operator">&amp;&amp;</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxHeight <span class="token operator">&lt;</span> maxImageHeight<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    maxImageHeight <span class="token operator">=</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxHeight<span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                maxImageWidth <span class="token operator">=</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxWidth <span class="token operator">||</span> preloader<span class="token punctuation">.</span>width <span class="token operator">||</span> maxImageWidth<span class="token punctuation">;</span>                maxImageHeight <span class="token operator">=</span> self<span class="token punctuation">.</span>options<span class="token punctuation">.</span>maxHeight <span class="token operator">||</span> preloader<span class="token punctuation">.</span>height <span class="token operator">||</span> maxImageHeight<span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            <span class="token comment">// Is the current image's width or height is greater than the maxImageWidth or maxImageHeight</span>            <span class="token comment">// option than we need to size down while maintaining the aspect ratio.</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>width <span class="token operator">></span> maxImageWidth<span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>height <span class="token operator">></span> maxImageHeight<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>width <span class="token operator">/</span> maxImageWidth<span class="token punctuation">)</span> <span class="token operator">></span> <span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>height <span class="token operator">/</span> maxImageHeight<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    imageWidth <span class="token operator">=</span> maxImageWidth<span class="token punctuation">;</span>                    imageHeight <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>width <span class="token operator">/</span> imageWidth<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    $image<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>imageWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>                    $image<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>imageHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                    imageHeight <span class="token operator">=</span> maxImageHeight<span class="token punctuation">;</span>                    imageWidth <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token punctuation">(</span>preloader<span class="token punctuation">.</span>height <span class="token operator">/</span> imageHeight<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    $image<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>imageWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>                    $image<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>imageHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>            self<span class="token punctuation">.</span><span class="token function">sizeContainer</span><span class="token punctuation">(</span>$image<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> $image<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>        <span class="token comment">// Preload image before showing</span>        preloader<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span>imageNumber<span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">=</span> imageNumber<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Stretch overlay to fit the viewport</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sizeOverlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token comment">/*        We use a setTimeout 0 to pause JS execution and let the rendering catch-up.        Why do this? If the `disableScrolling` option is set to true, a class is added to the body        tag that disables scrolling and hides the scrollbar. We want to make sure the scrollbar is        hidden before we measure the document width, as the presence of the scrollbar will affect the        number.        */</span>        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span>$overlay                <span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>                <span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Animate the size of the lightbox to fit the image we are showing</span>    <span class="token comment">// This method also shows the the image.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">sizeContainer</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">imageWidth<span class="token punctuation">,</span> imageHeight</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> oldWidth <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">outerWidth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> oldHeight <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">outerHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> newWidth <span class="token operator">=</span> imageWidth <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>right <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>left <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>right<span class="token punctuation">;</span>        <span class="token keyword">var</span> newHeight <span class="token operator">=</span> imageHeight <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>containerPadding<span class="token punctuation">.</span>bottom <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>top <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>imageBorderWidth<span class="token punctuation">.</span>bottom<span class="token punctuation">;</span>        <span class="token keyword">function</span> <span class="token function">postResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            self<span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-dataContainer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span>newWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>            self<span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prevLink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>newHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            self<span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-nextLink'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>newHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">// Set focus on one of the two root nodes so keyboard events are captured.</span>            self<span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">focus</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            self<span class="token punctuation">.</span><span class="token function">showImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>oldWidth <span class="token operator">!==</span> newWidth <span class="token operator">||</span> oldHeight <span class="token operator">!==</span> newHeight<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">animate</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>                width<span class="token operator">:</span> newWidth<span class="token punctuation">,</span>                height<span class="token operator">:</span> newHeight            <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeDuration<span class="token punctuation">,</span> <span class="token string">'swing'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token function">postResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token function">postResize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Display the image and its details and begin preload neighboring images.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">showImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-loader'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-image'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>imageFadeDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateNav</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">updateDetails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">preloadNeighboringImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">enableKeyboardNav</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Display previous and next navigation if appropriate.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">updateNav</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token comment">// Check to see if the browser supports touch events. If so, we take the conservative approach</span>        <span class="token comment">// and assume that mouse hover events are not supported and always show prev/next navigation</span>        <span class="token comment">// arrows in image sets.</span>        <span class="token keyword">var</span> alwaysShowNav <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>            document<span class="token punctuation">.</span><span class="token function">createEvent</span><span class="token punctuation">(</span><span class="token string">'TouchEvent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            alwaysShowNav <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>alwaysShowNavOnTouchDevices<span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span> <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-nav'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>wrapAround<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span>alwaysShowNav<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prev, .lb-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prev, .lb-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prev'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>alwaysShowNav<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-prev'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">&lt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                    <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token keyword">if</span> <span class="token punctuation">(</span>alwaysShowNav<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-next'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">,</span> <span class="token string">'1'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token punctuation">&#125;</span>                <span class="token punctuation">&#125;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Display caption, image number, and closing button.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">updateDetails</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>        <span class="token comment">// Enable anchor clicks in the injected caption html.</span>        <span class="token comment">// Thanks Nate Wright for the fix. @https://github.com/NateWr</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>title <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>title <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> $caption <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-caption'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>sanitizeTitle<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                $caption<span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>                $caption<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex<span class="token punctuation">]</span><span class="token punctuation">.</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>            $caption<span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>showImageNumberLabel<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> labelText <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">imageCountLabel</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span>labelText<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token string">'fast'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-number'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hide</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$outerContainer<span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'animating'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.lb-dataContainer'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">fadeIn</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>resizeDuration<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">return</span> self<span class="token punctuation">.</span><span class="token function">sizeOverlay</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Preload previous and next images in set.</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">preloadNeighboringImages</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> preloadNext <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preloadNext<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">var</span> preloadPrev <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            preloadPrev<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>link<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">enableKeyboardNav</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup.keyboard'</span><span class="token punctuation">,</span> $<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyboardAction<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'keyup.keyboard'</span><span class="token punctuation">,</span> $<span class="token punctuation">.</span><span class="token function">proxy</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>keyboardAction<span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">disableKeyboardNav</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'.keyboard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'.keyboard'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">keyboardAction</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">var</span> <span class="token constant">KEYCODE_ESC</span> <span class="token operator">=</span> <span class="token number">27</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token constant">KEYCODE_LEFTARROW</span> <span class="token operator">=</span> <span class="token number">37</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> <span class="token constant">KEYCODE_RIGHTARROW</span> <span class="token operator">=</span> <span class="token number">39</span><span class="token punctuation">;</span>        <span class="token keyword">var</span> keycode <span class="token operator">=</span> event<span class="token punctuation">.</span>keyCode<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>keycode <span class="token operator">===</span> <span class="token constant">KEYCODE_ESC</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token comment">// Prevent bubbling so as to not affect other components on the page.</span>            event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>keycode <span class="token operator">===</span> <span class="token constant">KEYCODE_LEFTARROW</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">!==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>wrapAround <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>keycode <span class="token operator">===</span> <span class="token constant">KEYCODE_RIGHTARROW</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">!==</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentImageIndex <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>wrapAround <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>album<span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>                <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">changeImage</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token punctuation">&#125;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token comment">// Closing time. :-(</span>    <span class="token class-name">Lightbox</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">end</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">disableKeyboardNav</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token function">$</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>sizeOverlay<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$lightbox<span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>fadeDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">this</span><span class="token punctuation">.</span>$overlay<span class="token punctuation">.</span><span class="token function">fadeOut</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>fadeDuration<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>options<span class="token punctuation">.</span>disableScrolling<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>            <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'body'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'lb-disable-scrolling'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Lightbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></details><hr><details>  <summary>lightbox.css</summary><pre><code><pre class="language-css" data-language="css"><code class="language-css"><span class="token selector">body.lb-disable-scrolling</span> <span class="token punctuation">&#123;</span>    <span class="token property">overflow</span><span class="token punctuation">:</span> hidden<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lightboxOverlay</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 9999<span class="token punctuation">;</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=80<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.8<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lightbox</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 10000<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lightbox .lb-image</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> auto<span class="token punctuation">;</span>    <span class="token property">max-width</span><span class="token punctuation">:</span> inherit<span class="token punctuation">;</span>    <span class="token property">max-height</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>    <span class="token comment">/* Image border */</span>    <span class="token property">border</span><span class="token punctuation">:</span> 4px solid white<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lightbox a img</span> <span class="token punctuation">&#123;</span>    <span class="token property">border</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-outerContainer</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>    *<span class="token property">zoom</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token comment">/* Background color behind image.    This is visible during transitions. */</span>    <span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-outerContainer:after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-loader</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 43%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 25%<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-cancel</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 32px<span class="token punctuation">;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/loading.gif<span class="token punctuation">)</span></span> no-repeat<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav</span> <span class="token punctuation">&#123;</span>    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>    <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">z-index</span><span class="token punctuation">:</span> 10<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-container>.nav</span> <span class="token punctuation">&#123;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav a</span> <span class="token punctuation">&#123;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span><span class="token string url">'data:image/gif;base64,R0lGODlhAQABAPAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=='</span><span class="token punctuation">)</span></span><span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-prev,.lb-next</span> <span class="token punctuation">&#123;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav a.lb-prev</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 34%<span class="token punctuation">;</span>    <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/prev.png<span class="token punctuation">)</span></span> left 48% no-repeat<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">-moz-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">-o-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav a.lb-prev:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=100<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav a.lb-next</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 64%<span class="token punctuation">;</span>    <span class="token property">right</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/next.png<span class="token punctuation">)</span></span> right 48% no-repeat<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=0<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>    <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">-moz-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">-o-transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.6s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-nav a.lb-next:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=100<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-dataContainer</span> <span class="token punctuation">&#123;</span>    <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>    <span class="token property">padding-top</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>    *<span class="token property">zoom</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>    <span class="token property">border-bottom-left-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>    <span class="token property">border-bottom-right-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-dataContainer:after</span> <span class="token punctuation">&#123;</span>    <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">""</span><span class="token punctuation">;</span>    <span class="token property">display</span><span class="token punctuation">:</span> table<span class="token punctuation">;</span>    <span class="token property">clear</span><span class="token punctuation">:</span> both<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data</span> <span class="token punctuation">&#123;</span>    <span class="token property">padding</span><span class="token punctuation">:</span> 0 4px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-details</span> <span class="token punctuation">&#123;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 85%<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1.1em<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-caption</span> <span class="token punctuation">&#123;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>    <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span>    <span class="token property">line-height</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-caption a</span> <span class="token punctuation">&#123;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #4ae<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-number</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">clear</span><span class="token punctuation">:</span> left<span class="token punctuation">;</span>    <span class="token property">padding-bottom</span><span class="token punctuation">:</span> 1em<span class="token punctuation">;</span>    <span class="token property">font-size</span><span class="token punctuation">:</span> 12px<span class="token punctuation">;</span>    <span class="token property">color</span><span class="token punctuation">:</span> #999999<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-close</span> <span class="token punctuation">&#123;</span>    <span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span>    <span class="token property">float</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>    <span class="token property">width</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>    <span class="token property">background</span><span class="token punctuation">:</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>../images/close.png<span class="token punctuation">)</span></span> top right no-repeat<span class="token punctuation">;</span>    <span class="token property">text-align</span><span class="token punctuation">:</span> right<span class="token punctuation">;</span>    <span class="token property">outline</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=70<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 0.7<span class="token punctuation">;</span>    <span class="token property">-webkit-transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span>    <span class="token property">-moz-transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span>    <span class="token property">-o-transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span>    <span class="token property">transition</span><span class="token punctuation">:</span> opacity 0.2s<span class="token punctuation">;</span><span class="token punctuation">&#125;</span><span class="token selector">.lb-data .lb-close:hover</span> <span class="token punctuation">&#123;</span>    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>    <span class="token property">filter</span><span class="token punctuation">:</span> <span class="token property">progid</span><span class="token punctuation">:</span>DXImageTransform.Microsoft.<span class="token function">Alpha</span><span class="token punctuation">(</span>Opacity=100<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token property">opacity</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre></code></pre></details><h2 id="引入资源文件"><a href="#引入资源文件" class="headerlink" title="引入资源文件"></a>引入资源文件</h2><div class="warning"><blockquote><p>注意还需要jquery.js的支持</p></blockquote></div><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><pre class="language-html" data-language="html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">data-lightbox</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image-1<span class="token punctuation">"</span></span> <span class="token attr-name">data-title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>图片title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span></code></pre><blockquote><p>href和src都填图片地址</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 前端 </tag>
            
            <tag> JS </tag>
            
            <tag> HTML </tag>
            
            <tag> CSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>高精度算法</title>
      <link href="/2021/07/26/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95/"/>
      <url>/2021/07/26/%E9%AB%98%E7%B2%BE%E5%BA%A6%E7%AE%97%E6%B3%95/</url>
      
        <content type="html"><![CDATA[<p>高精度算法也可以称为大整数算法，用于处理那些长度过大，<code>long long</code> 都无法解决的问题。<br>基本思路，利用数组等数据结构存储大整数，然后模拟大整数的运算，来实现高精度运算。</p><span id="more"></span><h2 id="大整数加法"><a href="#大整数加法" class="headerlink" title="大整数加法"></a>大整数加法</h2><blockquote><p>利用两个string存储整数，然后根据两者的长度关系，将短的前面补上0，以实现长度的等长关系，方便后续运算。<br>定义一个int变量用于记录进位关系<br>从sting的尾部（个位）开始逐位相加对10取余加到结果string的前面<code>string支持直接相加实现相连效果</code> 注意也要把前一位的进位信息加上去。并记录本位的进位信息。<br>注意由于加法可能最高位会进一位，所以要注意最后看看首位是否需要加一个1</p></blockquote><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token comment">//a+b=c</span>    string a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>    cin <span class="token operator">>></span> a <span class="token operator">>></span> b<span class="token punctuation">;</span>    <span class="token keyword">int</span> as<span class="token operator">=</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>bs<span class="token operator">=</span>bs<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//短的补0</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> as<span class="token operator">-</span>bs<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            b <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bs<span class="token operator">-</span>as<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            a <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> a<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span><span class="token comment">//进位信息变量</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token comment">//添加到首位</span>        c <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">(</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token string">'0'</span> <span class="token operator">+</span> flag<span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>        <span class="token comment">//记录进位信息</span>        flag <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> <span class="token string">'0'</span> <span class="token operator">+</span> flag<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//是否需要首位补1</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        c <span class="token operator">=</span> <span class="token string">'1'</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token comment">//输出</span>    cout <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="大整数减法"><a href="#大整数减法" class="headerlink" title="大整数减法"></a>大整数减法</h2><blockquote><p>利用两个string存储整数，然后根据两者的长度关系，将短的前面补上0，以实现长度的等长关系，方便后续运算。<br>定义一个int变量用于记录借位<br>利用字符串比较来保证a总是大的那个数，否则交换一下，并记录一下以便输出的时候输出负号<br>模拟减法</p></blockquote><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    string a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c<span class="token punctuation">;</span>    <span class="token keyword">int</span> f <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> a <span class="token operator">>></span> b<span class="token punctuation">;</span>    <span class="token keyword">int</span> as <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> bs <span class="token operator">=</span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">></span> b<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> as <span class="token operator">-</span> bs<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            b <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> b<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> bs <span class="token operator">-</span> as<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            a <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token operator">+</span> a<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>b <span class="token operator">></span> a<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        f <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        string s<span class="token punctuation">;</span>        s <span class="token operator">=</span> b<span class="token punctuation">;</span>        b <span class="token operator">=</span> a<span class="token punctuation">;</span>        a <span class="token operator">=</span> s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">int</span> flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> a<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">>=</span> <span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">--</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> flag <span class="token operator">&lt;</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            c <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> flag <span class="token operator">-</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token number">10</span> <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>            flag <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            c <span class="token operator">=</span> <span class="token keyword">char</span><span class="token punctuation">(</span>a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> flag <span class="token operator">-</span> b<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+</span> <span class="token string">'0'</span><span class="token punctuation">)</span> <span class="token operator">+</span> c<span class="token punctuation">;</span>            flag <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>f<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cout <span class="token operator">&lt;&lt;</span> <span class="token string">"-"</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cout <span class="token operator">&lt;&lt;</span> c<span class="token punctuation">;</span><span class="token punctuation">&#125;</span></code></pre><h2 id="大整数乘法"><a href="#大整数乘法" class="headerlink" title="大整数乘法"></a>大整数乘法</h2><h2 id="大整数除法"><a href="#大整数除法" class="headerlink" title="大整数除法"></a>大整数除法</h2>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> 高精度 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP32使用VLGL(arduino)</title>
      <link href="/2021/07/25/ESP32%E4%BD%BF%E7%94%A8MPU6050/"/>
      <url>/2021/07/25/ESP32%E4%BD%BF%E7%94%A8MPU6050/</url>
      
        <content type="html"><![CDATA[<span id="more"></span>]]></content>
      
      
      <categories>
          
          <category> 硬件开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 硬件开发 </tag>
            
            <tag> Arduino </tag>
            
            <tag> ESP32 </tag>
            
            <tag> MPU6050 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP32使用VLGL(arduino)</title>
      <link href="/2021/07/25/ESP32%E4%BD%BF%E7%94%A8VLGL(arduino)/"/>
      <url>/2021/07/25/ESP32%E4%BD%BF%E7%94%A8VLGL(arduino)/</url>
      
        <content type="html"><![CDATA[<p>LVGL 为免费开源的图形库，用于在嵌入式设备的屏幕上创建 GUI，也适用于触摸屏</p><span id="more"></span><p>元件：</p><ul><li>ESP32</li><li>TFT 屏幕<br>软件：</li><li>Arduino<br>准备工作：</li><li>库<ul><li><a href="https://github.com/Bodmer/TFT_eSPI">TFT_eSPI</a></li><li><a href="https://github.com/Bodmer/TFT_Touch">TFT_Touch</a>(如果有触摸需求的话)</li><li><a href="https://github.com/lvgl/lv_arduino">lv_arduino</a></li></ul></li><li>将库引入 Arduino 的 Library 文化夹中去<br>更改配置文件：<blockquote><p>由于默认使用了 User_setup.h 配置文件所以需要根据自己的硬件环境进行更改方法为：<br>在 User_Setup_select.h 文件中将 User_setup.h 头文件注释掉再根据自己的开发版和屏幕型号选择对应的头文件取消注释，然后道相应的头文件里面配置引脚和屏幕大小即可。<br>可以使用库中的 examples 测试。<br>参考：<a href="https://blog.csdn.net/qq_41868901/article/details/107998469">https://blog.csdn.net/qq_41868901/article/details/107998469</a></p></blockquote></li></ul>]]></content>
      
      
      <categories>
          
          <category> 硬件开发 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 硬件开发 </tag>
            
            <tag> Arduino </tag>
            
            <tag> ESP32 </tag>
            
            <tag> VLGL图形库 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>pat-Ranking</title>
      <link href="/2021/07/18/Ranking/"/>
      <url>/2021/07/18/Ranking/</url>
      
        <content type="html"><![CDATA[<p>排名问题（同分数排名处理）</p><span id="more"></span><h2 id="问题重述"><a href="#问题重述" class="headerlink" title="问题重述"></a>问题重述</h2><details>  <summary>问题描述</summary><p>  Programming Ability Test (PAT) is organized by the College of Computer Science and Technology of Zhejiang University. Each test is supposed to run simultaneously in several places, and the ranklists will be merged immediately after the test. Now it is your job to write a program to correctly merge all the ranklists and generate the final rank.</p><p>  <code>Input Specification:</code><br>  Each input file contains one test case. For each case, the first line contains a positive number N (≤100), the number of test locations. Then N ranklists follow, each starts with a line containing a positive integer K (≤300), the number of testees, and then K lines containing the registration number (a 13-digit number) and the total score of each testee. All the numbers in a line are separated by a space.</p><p>  <code>Output Specification:</code><br>  For each test case, first print in one line the total number of testees. Then print the final ranklist in the following format:</p><p>  <code>registration_number</code> <code>final_rank</code> <code>location_number</code> <code>local_rank</code><br>  The locations are numbered from 1 to N. The output must be sorted in nondecreasing order of the final ranks. The testees with the same score must have the same rank, and the output must be sorted in nondecreasing order of their registration numbers.</p><p>  <code>Sample Input:</code><br>  2<br>  5<br>  1234567890001 95<br>  1234567890005 100<br>  1234567890003 95<br>  1234567890002 77<br>  1234567890004 85<br>  4<br>  1234567890013 65<br>  1234567890011 25<br>  1234567890014 100<br>  1234567890012 85</p><p>  <code>Sample Output:</code><br>  9<br>  1234567890005 1 1 1<br>  1234567890014 1 2 1<br>  1234567890001 3 1 2<br>  1234567890003 3 1 2<br>  1234567890004 5 1 4<br>  1234567890012 5 2 2<br>  1234567890002 7 1 5<br>  1234567890013 8 2 3<br>  1234567890011 9 2 4</p></details><h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>成绩排名问题，难点有两方面：</p><ol><li>同分排名问题</li><li>地区排名问题</li></ol><h2 id="解决方法"><a href="#解决方法" class="headerlink" title="解决方法"></a>解决方法</h2><p>排序之后，设置一个变量用于记录已统计的个数，如果当前人的分数和上一个相同排名就和前一个相同，否则按照排名来。<br>地区排名可以理解为分部分排名，可以用数组记录每个地区已经排了多少人了，进而确定当前的排名，但也要注意同分问题。</p><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><pre class="language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;bits/stdc++.h></span></span><span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span><span class="token keyword">struct</span> <span class="token class-name">node</span><span class="token punctuation">&#123;</span>    string id<span class="token punctuation">;</span>    <span class="token keyword">int</span> s<span class="token punctuation">;</span>    <span class="token keyword">int</span> l<span class="token punctuation">;</span>    <span class="token keyword">int</span> r1<span class="token punctuation">;</span>    <span class="token keyword">int</span> r2<span class="token punctuation">;</span>    <span class="token function">node</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        r1 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        r2 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token punctuation">;</span><span class="token keyword">bool</span> <span class="token function">cmp</span><span class="token punctuation">(</span>node a<span class="token punctuation">,</span> node b<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span>a<span class="token punctuation">.</span>s <span class="token operator">!=</span> b<span class="token punctuation">.</span>s<span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span>s <span class="token operator">></span> b<span class="token punctuation">.</span>s<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    <span class="token keyword">else</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">return</span> a<span class="token punctuation">.</span>id <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>id<span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>    vector<span class="token operator">&lt;</span>node<span class="token operator">></span> v<span class="token punctuation">;</span>    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span>num<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>    cin <span class="token operator">>></span> m<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        cin <span class="token operator">>></span> n<span class="token punctuation">;</span>        num<span class="token operator">+=</span>n<span class="token punctuation">;</span>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> j<span class="token operator">++</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            node temp<span class="token punctuation">;</span>            cin <span class="token operator">>></span> temp<span class="token punctuation">.</span>id <span class="token operator">>></span> temp<span class="token punctuation">.</span>s<span class="token punctuation">;</span>            temp<span class="token punctuation">.</span>l <span class="token operator">=</span> i<span class="token punctuation">;</span>            v<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span>    <span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> cmp<span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> rank <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> lr<span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">int</span> lp<span class="token punctuation">[</span>m <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> m<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        lr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>        lp<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>    <span class="token punctuation">&#125;</span>    cout<span class="token operator">&lt;&lt;</span>num<span class="token operator">&lt;&lt;</span>endl<span class="token punctuation">;</span>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>    <span class="token punctuation">&#123;</span>        <span class="token keyword">int</span> r1<span class="token punctuation">,</span> r2<span class="token punctuation">,</span> np<span class="token punctuation">;</span>        np <span class="token operator">=</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">></span> <span class="token number">0</span> <span class="token operator">&amp;&amp;</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">==</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>s<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            r1 <span class="token operator">=</span> v<span class="token punctuation">[</span>i <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>r1<span class="token punctuation">;</span>            v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r1 <span class="token operator">=</span> r1<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r1 <span class="token operator">=</span> rank<span class="token punctuation">;</span>            r1 <span class="token operator">=</span> rank<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        rank<span class="token operator">++</span><span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>lp<span class="token punctuation">[</span>np<span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> v<span class="token punctuation">[</span>lp<span class="token punctuation">[</span>np<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>s <span class="token operator">==</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>s<span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            r2 <span class="token operator">=</span> v<span class="token punctuation">[</span>lp<span class="token punctuation">[</span>np<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span>r2<span class="token punctuation">;</span>            v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r2 <span class="token operator">=</span> r2<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        <span class="token keyword">else</span>        <span class="token punctuation">&#123;</span>            r2 <span class="token operator">=</span> lr<span class="token punctuation">[</span>np<span class="token punctuation">]</span><span class="token punctuation">;</span>            v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>r2 <span class="token operator">=</span> r2<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>        lr<span class="token punctuation">[</span>np<span class="token punctuation">]</span><span class="token operator">++</span><span class="token punctuation">;</span>        lp<span class="token punctuation">[</span>np<span class="token punctuation">]</span> <span class="token operator">=</span> i<span class="token punctuation">;</span>        cout <span class="token operator">&lt;&lt;</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span> <span class="token operator">&lt;&lt;</span> r1 <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span> <span class="token operator">&lt;&lt;</span> v<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>l <span class="token operator">&lt;&lt;</span> <span class="token string">' '</span> <span class="token operator">&lt;&lt;</span> r2<span class="token punctuation">;</span>        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">!=</span> v<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span>        <span class="token punctuation">&#123;</span>            cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>        <span class="token punctuation">&#125;</span>    <span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span></code></pre>]]></content>
      
      
      <categories>
          
          <category> 算法 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 算法 </tag>
            
            <tag> PAT甲级 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>demo</title>
      <link href="/2021/07/18/demo/"/>
      <url>/2021/07/18/demo/</url>
      
        <content type="html"><![CDATA[<p>测试一下咯</p><span id="more"></span><h3 id="你好呀"><a href="#你好呀" class="headerlink" title="你好呀"></a>你好呀</h3><h4 id="helloworld1"><a href="#helloworld1" class="headerlink" title="helloworld1"></a>helloworld1</h4><pre class="language-c++" data-language="c++"><code class="language-c++">#include&lt;bits&#x2F;stdc++.h&gt;int main()&#123;    cout&lt;&lt;&quot;hello world&quot;;&#125;</code></pre><details>  <summary>Summary</summary> <div class="warning"><blockquote><p>Warning</p></blockquote></div></details>> Primary<div class="success"><blockquote><p>Success</p></blockquote></div><div class="warning"><blockquote><p>Warning</p></blockquote></div><div class="danger"><blockquote><p>Danger</p></blockquote></div><div class="info"><blockquote><p>Info</p></blockquote></div>]]></content>
      
      
      <categories>
          
          <category> demo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> demo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
